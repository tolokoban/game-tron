"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}require("s2.car",function(require,module){var Polyline=require("s2.polyline"),_require=require("common"),readonly=_require.readonly,MINUS_ONE=-1,DIRECTIONS=[[0,MINUS_ONE],[1,0],[0,1],[MINUS_ONE,0]],RIGHT=1,Car=function(){function Car(action){var x=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,y=2<arguments.length&&void 0!==arguments[2]?arguments[2]:256,dir=3<arguments.length&&void 0!==arguments[3]?arguments[3]:RIGHT;_classCallCheck(this,Car),this.action=action,this.walls=[x,y,x,y],this.minSpeed=.05,this.speed=this.minSpeed,this.maxSpeed=.25,this.break=5e-4,this.lastTime=0,this.dir=dir,readonly(this,{polyline:new Polyline(x,y)})}return _createClass(Car,[{key:"move",value:function move(time){if(0===this.lastTime)return void(this.lastTime=time);var delta=time-this.lastTime;this.lastTime=time,this.speed>this.minSpeed&&(this.speed=Math.max(this.minSpeed,this.speed-this.break*delta));var action=this.action;action.actionRight?(this.polyline.add(),this.dir=(this.dir+RIGHT)%DIRECTIONS.length):action.actionLeft&&(this.polyline.add(),this.dir=(this.dir+3)%DIRECTIONS.length),action.actionAccel&&(this.speed=this.maxSpeed);var dirV=DIRECTIONS[this.dir],vx=this.speed*delta*dirV[0],vy=this.speed*delta*dirV[1];this.polyline.move(vx,vy)}}]),Car}();module.exports=Car,module.exports._=function _(){return""}});