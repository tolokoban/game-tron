"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}require("webgl.camera",function(require,module){function readonly(target,name,value){return"string"==typeof name?void("function"==typeof value?Object.defineProperty(target,name,{get:value,set:function set(){throw Error("Property \"".concat(name,"\" is read only!"))},configurable:!1,enumerable:!0}):Object.defineProperty(target,name,{value:value,writable:!1,configurable:!1,enumerable:!0})):void Object.keys(name).forEach(function(key){readonly(target,key,name[key])})}var MathGL=require("webgl.math").m4,DEG_TO_RAD=Math.PI/180,Camera=function(){function Camera(_args){var _this=this;_classCallCheck(this,Camera);var that=this,args="undefined"==typeof _args?{}:_args;"undefined"==typeof args.angle&&(args.angle=35),"undefined"==typeof args.aspect&&(args.aspect=1),"undefined"==typeof args.near&&(args.near=.5),"undefined"==typeof args.far&&(args.far=2e3),this._angle=args.angle,this._aspect=args.aspect,this._near=args.near,this._far=args.far,this._perspectiveIsOutOfDate=!1,this._perspective=MathGL.perspective(args.angle*DEG_TO_RAD,args.aspect,args.near,args.far),this._transform=MathGL.identity(),this._matrix=MathGL.mul(this._perspective,this._transform),["angle","aspect","near","far"].forEach(function(name){return Object.defineProperty(_this,name,{get:function get(){return that["_".concat(name)]},set:function set(v){v===that["_".concat(name)]||(that["_".concat(name)]=v,that._perspectiveIsOutOfDate=!0)}})}),readonly(this,{perspective:function perspective(){return that._perspectiveIsOutOfDate&&that.updatePerspective(),that._perspective},transform:function transform(){return that._transform},matrix:function matrix(){return that._perspectiveIsOutOfDate&&that.updatePerspective(),that._matrix}})}return _createClass(Camera,[{key:"orbit",value:function orbit(x,y,z,distance,latitude,longitude){MathGL.cameraPolar(x,y,z,distance,latitude,longitude,this._transform),this.updateMatrix()}},{key:"updatePerspective",value:function updatePerspective(){MathGL.perspective(this._angle*DEG_TO_RAD,this._aspect,this._near,this._far,this._perspective),this._perspectiveIsOutOfDate=!1}},{key:"updateMatrix",value:function updateMatrix(){MathGL.mul(this.perspective,this._transform,this._matrix)}}]),Camera}();module.exports=Camera,module.exports._=function _(){return""}});