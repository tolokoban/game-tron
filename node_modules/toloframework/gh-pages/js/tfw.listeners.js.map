{"version":3,"file":"tfw.listeners.js","sources":["tfw.listeners.js"],"sourcesContent":["/** @module tfw.listeners */require( 'tfw.listeners', function(require, module, exports) { var _=function(){var D={\"en\":{}},X=require(\"$\").intl;function _(){return X(D,arguments);}_.all=D;return _}();\n    /**\n * Gestion d'une liste de fonctions devant réagir à des événements.\n * @class\n */\nvar Listeners = function() {\n    this._list = [];\n};\n\n/**\n * Ajouter un __listener__ à la liste.\n * @param listener{function} Fonction à appeler quand l'énément est déclenché.\n * @return false  si le __listener__  n'a pas été ajouté  (parce qu'il\n * existe déjà ou parce qu'il n'est pas une fonction).\n */\nListeners.prototype.add = function(listener, obj) {\n    if (typeof listener !== 'function') return false;\n    this.remove(listener);\n    for (var i = 0 ; i < this._list.length ; i++) {\n        if (listener === this._list[i]) return false;\n    }\n    this._list.push([listener, obj]);\n    return true;\n};\n\n/**\n * Supprimer le __listener__ de la liste.\n * @param listener{function} Fonction à appeler quand l'énément est déclenché.\n * @return false si le __listener__  n'existe pas.\n */\nListeners.prototype.remove = function(listener, obj) {\n    if (typeof listener !== 'function') return false;\n    for (var i = 0 ; i < this._list.length ; i++) {\n        var x = this._list[i];\n        if (listener === x[0] && obj === x[1]) {\n            this._list.splice(i, 1);            \n            return true;\n        }\n    }\n    return false;\n};\n\n/**\n * Supprimer tous les __listeners__ de la liste.\n */\nListeners.prototype.clear = function() {\n    this._list = [];\n};\n\n/**\n * Emettre l'événement. Si un listener retourne ```false```, on n'appelle pas les listeners suivants.\n */\nListeners.prototype.fire = function() {\n    var i, listener, obj, x,\n        args = Array.prototype.slice.call( arguments );\n    for (i = 0 ; i < this._list.length ; i++) {\n        x = this._list[i];\n        listener = x[0];\n        obj = x[1];\n        if (false === listener.apply(obj, args)) return false;\n    }    \n    return true;\n};\n\n\nmodule.exports = Listeners;\n\n\n  \nmodule.exports._ = _;\n});"],"names":["require","module","exports","_","X","D","arguments","en","intl","all","Listeners","this","_list","prototype","add","listener","obj","remove","i","length","push","x","splice","clear","fire","args","Array","slice","call","apply"],"mappings":"AAA4BA,QAAS,gBAAiB,SAASA,EAASC,EAAQC,GAAW,GAAIC,GAAE,WAA+C,QAASA,KAAI,MAAOC,GAAEC,EAAEC,WAA5D,GAAID,IAAGE,OAASH,EAAEJ,EAAQ,KAAKQ,IAAiD,OAARL,GAAEM,IAAIJ,EAASF,KAK/LO,EAAY,WACZC,KAAKC,SASTF,GAAUG,UAAUC,IAAM,SAASC,EAAUC,GACzC,GAAwB,kBAAbD,GAAyB,OAAO,CAC3CJ,MAAKM,OAAOF,EACZ,KAAK,GAAIG,GAAI,EAAIA,EAAIP,KAAKC,MAAMO,OAASD,IACrC,GAAIH,IAAaJ,KAAKC,MAAMM,GAAI,OAAO,CAG3C,OADAP,MAAKC,MAAMQ,MAAML,EAAUC,KACpB,GAQXN,EAAUG,UAAUI,OAAS,SAASF,EAAUC,GAC5C,GAAwB,kBAAbD,GAAyB,OAAO,CAC3C,KAAK,GAAIG,GAAI,EAAIA,EAAIP,KAAKC,MAAMO,OAASD,IAAK,CAC1C,GAAIG,GAAIV,KAAKC,MAAMM,EACnB,IAAIH,IAAaM,EAAE,IAAML,IAAQK,EAAE,GAE/B,MADAV,MAAKC,MAAMU,OAAOJ,EAAG,IACd,EAGf,OAAO,GAMXR,EAAUG,UAAUU,MAAQ,WACxBZ,KAAKC,UAMTF,EAAUG,UAAUW,KAAO,WACvB,GAAIN,GAAGH,EAAUC,EAAKK,EAClBI,EAAOC,MAAMb,UAAUc,MAAMC,KAAMtB,UACvC,KAAKY,EAAI,EAAIA,EAAIP,KAAKC,MAAMO,OAASD,IAIjC,GAHAG,EAAIV,KAAKC,MAAMM,GACfH,EAAWM,EAAE,GACbL,EAAMK,EAAE,IACJ,IAAUN,EAASc,MAAMb,EAAKS,GAAO,OAAO,CAEpD,QAAO,GAIXxB,EAAOC,QAAUQ,EAIjBT,EAAOC,QAAQC,EAAIA"}