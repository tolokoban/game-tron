{"version":3,"sources":["tfw.binding.converters.js"],"names":["require","module","exports","_","D","X","intl","arguments","all","$","List","Color","CONVERTERS","areMany","areManyConverter","areNotMany","areNotManyConverter","array","arrayConverter","boolean","booleanConverter","booleans","booleansConverter","color","colorConverter","date","dateConverter","enum","enumConverter","float","floatConverter","integer","integerConverter","intlConverter","isEmpty","isEmptyConverter","isNotEmpty","isNotEmptyConverter","isNull","isNullConverter","isStrictlyPositive","isStrictlyPositiveConverter","isZero","isZeroConverter","keys","keysConverter","length","lengthConverter","list","listConverter","multilang","multilangConverter","not","notConverter","sortedKeys","sortedKeysConverter","string","stringConverter","strings","stringsConverter","time","timeConverter","unit","cssUnitConverter","units","cssUnitsConverter","validator","validatorConverter","get","converterName","converter","Error","Object","sort","join","set","RX_CSS_UNIT","v","trim","toLowerCase","m","exec","scalar","parseFloat","isNaN","TRUE_FUNC","rx","RegExp","text","test","value","Array","isArray","map","key","push","instance","parse","stringify","isList","slice","undefined","JSON","def","lang","result","valueForNaN","n","parseInt","caseInsensitiveList","x","idx","Math","max","indexOf","Date","number2time","string2time","DIGITS","hours","minutes","seconds","digit","index","len","count","charAt","d","setHours","setMinutes","setSeconds","v_","_v"],"mappings":";;;;AAAA;AAAqCA,OAAO,CAAE,wBAAF,EAA4B,UAASA,OAAT,EAAkBC,MAAlB,EAA0BC,OAA1B,EAAmC;AAAE,MAAIC,CAAC,GAAC,YAAU;AAAC,QAAIC,CAAC,GAAC;AAAC,YAAK,EAAN;AAAS,YAAK;AAAd,KAAN;AAAA,QAAwBC,CAAC,GAACL,OAAO,CAAC,GAAD,CAAP,CAAaM,IAAvC;;AAA4C,aAASH,CAAT,GAAY;AAAC,aAAOE,CAAC,CAACD,CAAD,EAAGG,SAAH,CAAR;AAAuB;;AAAAJ,IAAAA,CAAC,CAACK,GAAF,GAAMJ,CAAN;AAAQ,WAAOD,CAAP;AAAS,GAA5G,EAAN;;AAC1G;;AAEH,MACIM,CAAC,GAAGT,OAAO,CAAC,GAAD,CADf;AAAA,MAEIU,IAAI,GAAGV,OAAO,CAAC,kBAAD,CAFlB;AAAA,MAGIW,KAAK,GAAGX,OAAO,CAAC,WAAD,CAHnB;;AAKA,MAAMY,UAAU,GAAG;AACfC,IAAAA,OAAO,EAAEC,gBADM;AAEfC,IAAAA,UAAU,EAAEC,mBAFG;AAGfC,IAAAA,KAAK,EAAEC,cAHQ;AAIfC,IAAAA,OAAO,EAAEC,gBAJM;AAKfC,IAAAA,QAAQ,EAAEC,iBALK;AAMfC,IAAAA,KAAK,EAAEC,cANQ;AAOfC,IAAAA,IAAI,EAAEC,aAPS;AAQfC,IAAAA,IAAI,EAAEC,aARS;AASfC,IAAAA,KAAK,EAAEC,cATQ;AAUfC,IAAAA,OAAO,EAAEC,gBAVM;AAWf1B,IAAAA,IAAI,EAAE2B,aAXS;AAYfC,IAAAA,OAAO,EAAEC,gBAZM;AAafC,IAAAA,UAAU,EAAEC,mBAbG;AAcfC,IAAAA,MAAM,EAAEC,eAdO;AAefC,IAAAA,kBAAkB,EAAEC,2BAfL;AAgBfC,IAAAA,MAAM,EAAEC,eAhBO;AAiBfC,IAAAA,IAAI,EAAEC,aAjBS;AAkBfC,IAAAA,MAAM,EAAEC,eAlBO;AAmBfC,IAAAA,IAAI,EAAEC,aAnBS;AAoBfC,IAAAA,SAAS,EAAEC,kBApBI;AAqBfC,IAAAA,GAAG,EAAEC,YArBU;AAsBfC,IAAAA,UAAU,EAAEC,mBAtBG;AAuBfC,IAAAA,MAAM,EAAEC,eAvBO;AAwBfC,IAAAA,OAAO,EAAEC,gBAxBM;AAyBfC,IAAAA,IAAI,EAAEC,aAzBS;AA0BfC,IAAAA,IAAI,EAAEC,gBA1BS;AA2BfC,IAAAA,KAAK,EAAEC,iBA3BQ;AA4BfC,IAAAA,SAAS,EAAEC;AA5BI,GAAnB;;AA+BAjE,EAAAA,OAAO,CAACkE,GAAR,GAAc,UAASC,aAAT,EAAwB;AAClC,QAAMC,SAAS,GAAG1D,UAAU,CAACyD,aAAD,CAA5B;;AACA,QAAI,OAAOC,SAAP,KAAqB,UAAzB,EAAqC;AACjC,YAAMC,KAAK,CAAC,iCAAyBF,aAAzB,iDACqBG,MAAM,CAAC5B,IAAP,CAAYhC,UAAZ,EAAwB6D,IAAxB,GAA+BC,IAA/B,CAAoC,IAApC,CADrB,MAAD,CAAX;AAEH;;AACD,WAAOJ,SAAP;AACH,GAPD;;AAUApE,EAAAA,OAAO,CAACyE,GAAR,GAAc,UAASN,aAAT,EAAwBC,SAAxB,EAAmC;AAC7C,QAAI,OAAOA,SAAP,KAAqB,UAAzB,EAAqC;AACjC1D,MAAAA,UAAU,CAACyD,aAAD,CAAV,GAA4BC,SAA5B;AACH,KAFD,MAEO;AACH,aAAO1D,UAAU,CAACyD,aAAD,CAAjB;AACH;AACJ,GAND;;AAUA,MAAMO,WAAW,GAAG,+BAApB;;AAEA,WAASb,gBAAT,CAA0Bc,CAA1B,EAA6B;AACzB,QAAI,OAAOA,CAAP,KAAa,QAAjB,EAA2B,OAAOA,CAAC,GAAG,IAAX;AAC3B,QAAI,OAAOA,CAAP,KAAa,QAAjB,EAA2B,OAAO,GAAP;AAC3BA,IAAAA,CAAC,GAAG,CAAC,KAAKA,CAAN,EAASC,IAAT,GAAgBC,WAAhB,EAAJ;AACA,QAAIF,CAAC,KAAK,MAAN,IAAgBA,CAAC,KAAK,SAA1B,EAAqC,OAAOA,CAAP;AACrC,QAAIG,CAAC,GAAGJ,WAAW,CAACK,IAAZ,CAAiBJ,CAAjB,CAAR;AACA,QAAI,CAACG,CAAL,EAAQ,OAAO,GAAP;AACR,QAAIE,MAAM,GAAGC,UAAU,CAACH,CAAC,CAAC,CAAD,CAAF,CAAvB;AACA,QAAII,KAAK,CAACF,MAAD,CAAL,IAAiBA,MAAM,IAAI,CAA/B,EAAkC,OAAO,GAAP;AAClC,QAAIpB,IAAI,GAAGkB,CAAC,CAAC,CAAD,CAAZ;AACA,QAAIlB,IAAI,CAAChB,MAAL,GAAc,CAAlB,EAAqBgB,IAAI,GAAG,IAAP;AACrB,WAAOoB,MAAM,GAAGpB,IAAhB;AACH;;AAED,MAAIuB,SAAS,GAAG,SAAZA,SAAY,GAAW;AAAE,WAAO,IAAP;AAAc,GAA3C;;AAEA,WAASlB,kBAAT,CAA4BU,CAA5B,EAA+B;AAC3B,oBAAeA,CAAf;AACI,WAAK,QAAL;AACI,YAAIA,CAAC,CAACC,IAAF,GAAShC,MAAT,KAAoB,CAAxB,EAA2B,OAAOuC,SAAP;AAC3B,YAAIC,EAAE,GAAG,IAAIC,MAAJ,CAAWV,CAAX,CAAT;AACA,eAAO,UAASW,IAAT,EAAe;AAClB,iBAAOF,EAAE,CAACG,IAAH,CAAQD,IAAR,CAAP;AACH,SAFD;;AAGJ,WAAK,UAAL;AACI,eAAO,UAASE,KAAT,EAAgB;AACnB,iBAAOpE,iBAAiB,CAACuD,CAAC,CAACa,KAAD,CAAF,CAAxB;AACH,SAFD;AARR;;AAYA,WAAOL,SAAP;AACH;;AAED,WAASpB,iBAAT,CAA2BY,CAA3B,EAA8B;AAC1B,QAAI,CAACc,KAAK,CAACC,OAAN,CAAcf,CAAd,CAAL,EAAuB,OAAO,EAAP;AACvB,WAAOA,CAAC,CAACgB,GAAF,CAAM9B,gBAAN,CAAP;AACH;;AAED,WAAS3C,gBAAT,CAA0ByD,CAA1B,EAA6B;AACzB,oBAAeA,CAAf;AACI,WAAK,QAAL;AACI,eAAOA,CAAC,CAACC,IAAF,GAASC,WAAT,OAA2B,MAAlC;;AACJ,WAAK,QAAL;AACI,eAAOF,CAAC,KAAK,CAAb;;AACJ;AACI,eAAOA,CAAC,GAAG,IAAH,GAAU,KAAlB;AANR;AAQH;;AAED,WAAShC,aAAT,CAAuBgC,CAAvB,EAA0B;AACtB,QAAI,CAACA,CAAL,EAAQ,OAAO,EAAP;AACR,QAAIjC,IAAI,GAAG,EAAX;;AACA,SAAK,IAAIkD,GAAT,IAAgBjB,CAAhB;AAAmBjC,MAAAA,IAAI,CAACmD,IAAL,CAAUD,GAAV;AAAnB;;AACA,WAAOlD,IAAP;AACH;;AAED,WAASW,mBAAT,CAA6BsB,CAA7B,EAAgC;AAC5B,QAAIjC,IAAI,GAAGC,aAAa,CAACgC,CAAD,CAAxB;AACA,WAAOjC,IAAI,CAAC6B,IAAL,EAAP;AACH;;AAED,WAASnD,iBAAT,CAA2BuD,CAA3B,EAA8B;AAC1B,QAAI,CAACc,KAAK,CAACC,OAAN,CAAcf,CAAd,CAAL,EAAuB,OAAO,EAAP;AACvB,WAAOA,CAAC,CAACgB,GAAF,CAAMzE,gBAAN,CAAP;AACH;;AAED,WAASI,cAAT,CAAwBqD,CAAxB,EAA2B;AACvB,QAAI,OAAOA,CAAP,KAAa,QAAjB,EAA2B,OAAO,MAAP;AAC3B,QAAI,CAAClE,KAAK,CAACqF,QAAN,CAAeC,KAAf,CAAqBpB,CAArB,CAAL,EAA8B,OAAO,MAAP;AAC9B,WAAOlE,KAAK,CAACqF,QAAN,CAAeE,SAAf,EAAP;AACH;;AAED,WAAS7C,YAAT,CAAsBwB,CAAtB,EAAyB;AAAE,WAAO,CAACzD,gBAAgB,CAACyD,CAAD,CAAxB;AAA8B;;AAGzD,WAAS3D,cAAT,CAAwB2D,CAAxB,EAA2B;AACvB,QAAInE,IAAI,CAACyF,MAAL,CAAYtB,CAAZ,CAAJ,EAAoB,OAAOA,CAAC,CAACuB,KAAF,EAAP;AACpB,WAAOT,KAAK,CAACC,OAAN,CAAcf,CAAd,IAAmBA,CAAnB,GAAuB,CAACA,CAAD,CAA9B;AACH;;AAED,WAAS9B,eAAT,CAAyB8B,CAAzB,EAA4B;AACxB,QAAI,CAACA,CAAL,EAAQ,OAAO,CAAP;;AACR,QAAI,OAAOA,CAAC,CAAC/B,MAAT,KAAoB,QAAxB,EAAkC;AAC9B,aAAO+B,CAAC,CAAC/B,MAAT;AACH;;AACD,WAAO,CAAP;AACH;;AAED,WAASX,gBAAT,CAA0B0C,CAA1B,EAA6B;AACzB,QAAI,CAACA,CAAL,EAAQ,OAAO,IAAP;;AACR,QAAI,OAAOA,CAAP,KAAa,QAAjB,EAA2B;AACvB,aAAOA,CAAC,CAACC,IAAF,GAAShC,MAAT,KAAoB,CAA3B;AACH;;AACD,QAAI,OAAO+B,CAAC,CAAC/B,MAAT,KAAoB,QAAxB,EAAkC;AAC9B,aAAO+B,CAAC,CAAC/B,MAAF,KAAa,CAApB;AACH;;AACD,WAAO,KAAP;AACH;;AAED,WAAST,mBAAT,CAA6BwC,CAA7B,EAAgC;AAC5B,WAAO,CAAC1C,gBAAgB,CAAC0C,CAAD,CAAxB;AACH;AAED;;;;;;AAIA,WAAS/D,gBAAT,CAA0B+D,CAA1B,EAA6B;AACzB,QAAI,CAACA,CAAD,IAAM,OAAOA,CAAC,CAAC/B,MAAT,KAAoB,QAA9B,EAAwC,OAAO,KAAP;AACxC,WAAO+B,CAAC,CAAC/B,MAAF,GAAW,CAAlB;AACH;AAED;;;;;;AAIA,WAAS9B,mBAAT,CAA6B6D,CAA7B,EAAgC;AAC5B,QAAI,CAACA,CAAD,IAAM,OAAOA,CAAC,CAAC/B,MAAT,KAAoB,QAA9B,EAAwC,OAAO,IAAP;AACxC,WAAO+B,CAAC,CAAC/B,MAAF,IAAY,CAAnB;AACH;;AAGD,WAASa,gBAAT,CAA0BkB,CAA1B,EAA6B;AACzB,QAAI,CAACc,KAAK,CAACC,OAAN,CAAcf,CAAd,CAAL,EAAuB,OAAO,EAAP;AACvB,WAAOA,CAAC,CAACgB,GAAF,CAAM,UAAShB,CAAT,EAAY;AAAE,aAAO,KAAKA,CAAZ;AAAgB,KAApC,CAAP;AACH;;AAED,WAASpB,eAAT,CAAyBoB,CAAzB,EAA4B;AACxB,QAAIA,CAAC,KAAK,IAAN,IAAcA,CAAC,KAAKwB,SAAxB,EAAmC,OAAO,EAAP;;AACnC,QAAI,QAAOxB,CAAP,MAAa,QAAjB,EAA2B;AACvB,UAAIc,KAAK,CAACC,OAAN,CAAcf,CAAd,CAAJ,EAAsB;AAClB,eAAOyB,IAAI,CAACJ,SAAL,CAAerB,CAAf,CAAP;AACH,OAFD,MAEO;AACH,eAAO5C,aAAa,CAAC4C,CAAD,CAApB;AACH;AACJ;;AACD,WAAO,KAAKA,CAAZ;AACH;;AAED,WAAS1B,kBAAT,CAA4B0B,CAA5B,EAA+B;AAC3B,QAAI,CAACc,KAAK,CAACC,OAAN,CAAcf,CAAd,CAAD,IAAqB,QAAOA,CAAP,MAAa,QAAtC,EAAgD;AAC5C,UAAI0B,GAAG,GAAG,EAAV;AACAA,MAAAA,GAAG,CAAC9F,CAAC,CAAC+F,IAAF,EAAD,CAAH,GAAgB,KAAK3B,CAArB;AACA,aAAO0B,GAAP;AACH;;AACD,WAAO1B,CAAP;AACH;;AAED,WAAS5C,aAAT,CAAuB4C,CAAvB,EAA0B;AACtB,QAAI,OAAOA,CAAP,KAAa,QAAjB,EAA2B,OAAOA,CAAP;AAC3B,QAAI,OAAOA,CAAP,KAAa,WAAjB,EAA8B,OAAO,EAAP;AAC9B,QAAIA,CAAC,KAAK,IAAV,EAAgB,OAAO,EAAP;AAChB,QAAI4B,MAAM,GAAG5B,CAAC,CAACpE,CAAC,CAAC+F,IAAF,EAAD,CAAd;;AACA,QAAI,CAACC,MAAL,EAAa;AACT,WAAK,IAAID,IAAT,IAAiB3B,CAAjB,EAAoB;AAChB4B,QAAAA,MAAM,GAAG5B,CAAC,CAAC2B,IAAD,CAAV;AACA;AACH;AACJ;;AACD,QAAI,OAAOC,MAAP,KAAkB,QAAtB,EAAgC,OAAO,EAAP;AAChC,WAAOA,MAAP;AACH;;AAED,WAASxD,aAAT,CAAuB4B,CAAvB,EAA0B;AACtB,QAAInE,IAAI,CAACyF,MAAL,CAAYtB,CAAZ,CAAJ,EAAoB,OAAOA,CAAP;AACpB,WAAO,IAAInE,IAAJ,CAASQ,cAAc,CAAC2D,CAAD,CAAvB,CAAP;AACH;;AAED,WAAS7C,gBAAT,CAA0B0E,WAA1B,EAAuC;AACnC,QAAI,OAAOA,WAAP,KAAuB,QAA3B,EAAqC;AACjC,aAAO,UAAS7B,CAAT,EAAY;AACf,YAAI8B,CAAC,GAAGC,QAAQ,CAAC/B,CAAD,CAAhB;AACA,YAAIO,KAAK,CAACuB,CAAD,CAAT,EAAc,OAAOD,WAAP;AACd,eAAOC,CAAP;AACH,OAJD;AAKH,KAND,MAMO;AACH,aAAOC,QAAP;AACH;AACJ;;AAED,WAAS9E,cAAT,CAAwB4E,WAAxB,EAAqC;AACjC,QAAI,OAAOA,WAAP,KAAuB,QAA3B,EAAqC;AACjC,aAAO,UAAS7B,CAAT,EAAY;AACf,YAAI8B,CAAC,GAAGxB,UAAU,CAACN,CAAD,CAAlB;AACA,YAAIO,KAAK,CAACuB,CAAD,CAAT,EAAc,OAAOD,WAAP;AACd,eAAOC,CAAP;AACH,OAJD;AAKH,KAND,MAMO;AACH,aAAOxB,UAAP;AACH;AACJ;;AAED,WAASvD,aAAT,CAAuBoB,IAAvB,EAA6B;AACzBA,IAAAA,IAAI,GAAG9B,cAAc,CAAC8B,IAAD,CAArB;AACA,QAAI6D,mBAAmB,GAAG7D,IAAI,CAAC6C,GAAL,CAAS,UAASiB,CAAT,EAAY;AAAE,aAAOA,CAAC,CAAC/B,WAAF,EAAP;AAAyB,KAAhD,CAA1B;AACA,WAAO,UAASF,CAAT,EAAY;AACf,UAAIkC,GAAG,GAAGC,IAAI,CAACC,GAAL,CAAS,CAAT,EAAYJ,mBAAmB,CAACK,OAApB,CAA4B,CAAC,KAAKrC,CAAN,EAASE,WAAT,EAA5B,CAAZ,CAAV;AACA,aAAO/B,IAAI,CAAC+D,GAAD,CAAX;AACH,KAHD;AAIH;;AAED,WAASlD,aAAT,CAAuBgB,CAAvB,EAA0B;AACtB,QAAIA,CAAC,YAAYsC,IAAjB,EAAuB,OAAOtC,CAAP;AACvB,QAAI,OAAOA,CAAP,KAAa,QAAjB,EAA2B,OAAOuC,WAAW,CAACvC,CAAD,CAAlB;AAC3B,QAAI,OAAOA,CAAP,KAAa,QAAjB,EAA2B,OAAOwC,WAAW,CAACxC,CAAD,CAAlB;AAC3B,WAAO,IAAP;AACH;;AAED,WAASuC,WAAT,CAAqBvC,CAArB,EAAwB;AACpB,WAAO,IAAIsC,IAAJ,CAAStC,CAAT,CAAP;AACH;;AAED,MAAMyC,MAAM,GAAG,YAAf;;AAEA,WAASD,WAAT,CAAqBxC,CAArB,EAAwB;AACpB,QAAI0C,KAAK,GAAG,CAAZ;AACA,QAAIC,OAAO,GAAG,CAAd;AACA,QAAIC,OAAO,GAAG,CAAd;AACA,QAAIC,KAAK,GAAG,CAAZ;AACA,QAAIC,KAAK,GAAG,CAAZ;AACA,QAAIC,GAAG,GAAG/C,CAAC,CAAC/B,MAAZ;AACA,QAAI+E,KAAK,GAAG,CAAZ,CAPoB,CAQpB;;AACA,WAAOF,KAAK,GAAGC,GAAR,IAAeN,MAAM,CAACJ,OAAP,CAAerC,CAAC,CAACiD,MAAF,CAASH,KAAT,CAAf,MAAoC,CAAC,CAA3D;AAA8DA,MAAAA,KAAK;AAAnE,KAToB,CAUpB;;;AACAE,IAAAA,KAAK,GAAG,CAAR;;AACA,WAAOF,KAAK,GAAGC,GAAR,IAAeC,KAAK,GAAG,CAAvB,IAA4B,CAACH,KAAK,GAAGJ,MAAM,CAACJ,OAAP,CAAerC,CAAC,CAACiD,MAAF,CAASH,KAAT,CAAf,CAAT,MAA8C,CAAC,CAAlF,EAAqF;AACjFJ,MAAAA,KAAK,GAAG,KAAKA,KAAL,GAAaG,KAArB;AACAC,MAAAA,KAAK;AACLE,MAAAA,KAAK;AACR,KAhBmB,CAiBpB;;;AACA,WAAOF,KAAK,GAAGC,GAAR,IAAeN,MAAM,CAACJ,OAAP,CAAerC,CAAC,CAACiD,MAAF,CAASH,KAAT,CAAf,MAAoC,CAAC,CAA3D;AAA8DA,MAAAA,KAAK;AAAnE,KAlBoB,CAmBpB;;;AACAE,IAAAA,KAAK,GAAG,CAAR;;AACA,WAAOF,KAAK,GAAGC,GAAR,IAAeC,KAAK,GAAG,CAAvB,IAA4B,CAACH,KAAK,GAAGJ,MAAM,CAACJ,OAAP,CAAerC,CAAC,CAACiD,MAAF,CAASH,KAAT,CAAf,CAAT,MAA8C,CAAC,CAAlF,EAAqF;AACjFH,MAAAA,OAAO,GAAG,KAAKA,OAAL,GAAeE,KAAzB;AACAG,MAAAA,KAAK;AACLF,MAAAA,KAAK;AACR,KAzBmB,CA0BpB;;;AACA,WAAOA,KAAK,GAAGC,GAAR,IAAeN,MAAM,CAACJ,OAAP,CAAerC,CAAC,CAACiD,MAAF,CAASH,KAAT,CAAf,MAAoC,CAAC,CAA3D;AAA8DA,MAAAA,KAAK;AAAnE,KA3BoB,CA4BpB;;;AACAE,IAAAA,KAAK,GAAG,CAAR;;AACA,WAAOF,KAAK,GAAGC,GAAR,IAAeC,KAAK,GAAG,CAAvB,IAA4B,CAACH,KAAK,GAAGJ,MAAM,CAACJ,OAAP,CAAerC,CAAC,CAACiD,MAAF,CAASH,KAAT,CAAf,CAAT,MAA8C,CAAC,CAAlF,EAAqF;AACjFF,MAAAA,OAAO,GAAG,KAAKA,OAAL,GAAeC,KAAzB;AACAC,MAAAA,KAAK;AACLE,MAAAA,KAAK;AACR;;AAED,QAAIE,CAAC,GAAG,IAAIZ,IAAJ,CAAS,CAAT,CAAR;AACAY,IAAAA,CAAC,CAACC,QAAF,CAAWT,KAAX;AACAQ,IAAAA,CAAC,CAACE,UAAF,CAAaT,OAAb;AACAO,IAAAA,CAAC,CAACG,UAAF,CAAaT,OAAb;AACA,WAAOM,CAAP;AACH;;AAED,WAASrG,aAAT,CAAuBmD,CAAvB,EAA0B;AACtB,QAAIA,CAAC,YAAYsC,IAAjB,EAAuB,OAAOtC,CAAP;AAC1B;;AAED,WAASlC,eAAT,CAAyBkC,CAAzB,EAA4B;AACxB,WAAOA,CAAC,KAAK,CAAb;AACH;;AAED,WAAStC,eAAT,CAAyBsC,CAAzB,EAA4B;AACxB,QAAIO,KAAK,CAACP,CAAD,CAAT,EAAc,OAAO,IAAP;AACd,WAAO,CAACA,CAAD,GAAK,IAAL,GAAY,KAAnB;AACH;;AAED,WAASpC,2BAAT,CAAqC0F,EAArC,EAAyC;AACrC,QAAMtD,CAAC,GAAG,OAAOuD,EAAP,KAAc,QAAd,GAAyBA,EAAzB,GAA8BjD,UAAU,CAACgD,EAAD,CAAlD;AACA,QAAI/C,KAAK,CAACP,CAAD,CAAT,EAAc,OAAO,KAAP;AACd,WAAOA,CAAC,GAAG,CAAX;AACH;;AAGD5E,EAAAA,MAAM,CAACC,OAAP,CAAeC,CAAf,GAAmBA,CAAnB;AACC,CAlV2C,CAAP","sourcesContent":["/** @module tfw.binding.converters */require( 'tfw.binding.converters', function(require, module, exports) { var _=function(){var D={\"en\":{},\"fr\":{}},X=require(\"$\").intl;function _(){return X(D,arguments);}_.all=D;return _}();\n   \"use strict\";\n\nconst\n    $ = require(\"$\"),\n    List = require(\"tfw.binding.list\"),\n    Color = require(\"tfw.color\");\n\nconst CONVERTERS = {\n    areMany: areManyConverter,\n    areNotMany: areNotManyConverter,\n    array: arrayConverter,\n    boolean: booleanConverter,\n    booleans: booleansConverter,\n    color: colorConverter,\n    date: dateConverter,\n    enum: enumConverter,\n    float: floatConverter,\n    integer: integerConverter,\n    intl: intlConverter,\n    isEmpty: isEmptyConverter,\n    isNotEmpty: isNotEmptyConverter,\n    isNull: isNullConverter,\n    isStrictlyPositive: isStrictlyPositiveConverter,\n    isZero: isZeroConverter,\n    keys: keysConverter,\n    length: lengthConverter,\n    list: listConverter,\n    multilang: multilangConverter,\n    not: notConverter,\n    sortedKeys: sortedKeysConverter,\n    string: stringConverter,\n    strings: stringsConverter,\n    time: timeConverter,\n    unit: cssUnitConverter,\n    units: cssUnitsConverter,\n    validator: validatorConverter\n};\n\nexports.get = function(converterName) {\n    const converter = CONVERTERS[converterName];\n    if (typeof converter !== 'function') {\n        throw Error(`Converter not found: \"${converterName}\"!\\n` +\n            `Registred converters are: ${Object.keys(CONVERTERS).sort().join(\", \")}.`);\n    }\n    return converter;\n};\n\n\nexports.set = function(converterName, converter) {\n    if (typeof converter === 'function') {\n        CONVERTERS[converterName] = converter;\n    } else {\n        delete CONVERTERS[converterName];\n    }\n};\n\n\n\nconst RX_CSS_UNIT = /^(-?[.0-9]+)[ \\n\\r]*([a-z%]*)/;\n\nfunction cssUnitConverter(v) {\n    if (typeof v === 'number') return v + \"px\";\n    if (typeof v !== 'string') return \"0\";\n    v = (\"\" + v).trim().toLowerCase();\n    if (v === 'auto' || v === 'inherit') return v;\n    var m = RX_CSS_UNIT.exec(v);\n    if (!m) return \"0\";\n    var scalar = parseFloat(m[1]);\n    if (isNaN(scalar) || scalar == 0) return \"0\";\n    var unit = m[2];\n    if (unit.length < 1) unit = \"px\";\n    return scalar + unit;\n}\n\nvar TRUE_FUNC = function() { return true; };\n\nfunction validatorConverter(v) {\n    switch (typeof v) {\n        case 'string':\n            if (v.trim().length === 0) return TRUE_FUNC;\n            var rx = new RegExp(v);\n            return function(text) {\n                return rx.test(text);\n            };\n        case 'function':\n            return function(value) {\n                return booleansConverter(v(value));\n            };\n    }\n    return TRUE_FUNC;\n}\n\nfunction cssUnitsConverter(v) {\n    if (!Array.isArray(v)) return [];\n    return v.map(cssUnitConverter);\n}\n\nfunction booleanConverter(v) {\n    switch (typeof v) {\n        case 'string':\n            return v.trim().toLowerCase() === 'true';\n        case 'number':\n            return v !== 0;\n        default:\n            return v ? true : false;\n    }\n}\n\nfunction keysConverter(v) {\n    if (!v) return [];\n    var keys = [];\n    for (var key in v) keys.push(key);\n    return keys;\n}\n\nfunction sortedKeysConverter(v) {\n    var keys = keysConverter(v);\n    return keys.sort();\n}\n\nfunction booleansConverter(v) {\n    if (!Array.isArray(v)) return [];\n    return v.map(booleanConverter);\n}\n\nfunction colorConverter(v) {\n    if (typeof v !== 'string') return '#000';\n    if (!Color.instance.parse(v)) return '#000';\n    return Color.instance.stringify();\n}\n\nfunction notConverter(v) { return !booleanConverter(v); }\n\n\nfunction arrayConverter(v) {\n    if (List.isList(v)) return v.slice();\n    return Array.isArray(v) ? v : [v];\n}\n\nfunction lengthConverter(v) {\n    if (!v) return 0;\n    if (typeof v.length === 'number') {\n        return v.length;\n    }\n    return 0;\n}\n\nfunction isEmptyConverter(v) {\n    if (!v) return true;\n    if (typeof v === 'string') {\n        return v.trim().length === 0;\n    }\n    if (typeof v.length === 'number') {\n        return v.length === 0;\n    }\n    return false;\n}\n\nfunction isNotEmptyConverter(v) {\n    return !isEmptyConverter(v);\n}\n\n/**\n * @param   {object} v - Object with a `length` attribute.\n * @returns {boolean}  true if v.length > 1. If there is no `length` attribute, return false.\n */\nfunction areManyConverter(v) {\n    if (!v || typeof v.length !== 'number') return false;\n    return v.length > 1;\n}\n\n/**\n * @param   {object} v - Object with a `length` attribute.\n * @returns {boolean}  true if v.length < 2. If there is no `length` attribute, return true.\n */\nfunction areNotManyConverter(v) {\n    if (!v || typeof v.length !== 'number') return true;\n    return v.length <= 1;\n}\n\n\nfunction stringsConverter(v) {\n    if (!Array.isArray(v)) return [];\n    return v.map(function(v) { return \"\" + v; });\n}\n\nfunction stringConverter(v) {\n    if (v === null || v === undefined) return \"\";\n    if (typeof v === 'object') {\n        if (Array.isArray(v)) {\n            return JSON.stringify(v);\n        } else {\n            return intlConverter(v);\n        }\n    }\n    return \"\" + v;\n}\n\nfunction multilangConverter(v) {\n    if (!Array.isArray(v) && typeof v !== 'object') {\n        var def = {};\n        def[$.lang()] = \"\" + v;\n        return def;\n    }\n    return v;\n}\n\nfunction intlConverter(v) {\n    if (typeof v === 'string') return v;\n    if (typeof v === 'undefined') return \"\";\n    if (v === null) return \"\";\n    var result = v[$.lang()];\n    if (!result) {\n        for (var lang in v) {\n            result = v[lang];\n            break;\n        }\n    }\n    if (typeof result !== 'string') return \"\";\n    return result;\n}\n\nfunction listConverter(v) {\n    if (List.isList(v)) return v;\n    return new List(arrayConverter(v));\n}\n\nfunction integerConverter(valueForNaN) {\n    if (typeof valueForNaN === 'number') {\n        return function(v) {\n            var n = parseInt(v);\n            if (isNaN(n)) return valueForNaN;\n            return n;\n        };\n    } else {\n        return parseInt;\n    }\n}\n\nfunction floatConverter(valueForNaN) {\n    if (typeof valueForNaN === 'number') {\n        return function(v) {\n            var n = parseFloat(v);\n            if (isNaN(n)) return valueForNaN;\n            return n;\n        };\n    } else {\n        return parseFloat;\n    }\n}\n\nfunction enumConverter(list) {\n    list = arrayConverter(list);\n    var caseInsensitiveList = list.map(function(x) { return x.toLowerCase(); });\n    return function(v) {\n        var idx = Math.max(0, caseInsensitiveList.indexOf((\"\" + v).toLowerCase()));\n        return list[idx];\n    };\n}\n\nfunction timeConverter(v) {\n    if (v instanceof Date) return v;\n    if (typeof v === 'number') return number2time(v);\n    if (typeof v === 'string') return string2time(v);\n    return null;\n}\n\nfunction number2time(v) {\n    return new Date(v);\n}\n\nconst DIGITS = \"0123456789\";\n\nfunction string2time(v) {\n    var hours = 0;\n    var minutes = 0;\n    var seconds = 0;\n    var digit = 0;\n    var index = 0;\n    var len = v.length;\n    var count = 0;\n    // 0: Wait for first hours digit.\n    while (index < len && DIGITS.indexOf(v.charAt(index)) === -1) index++;\n    // 1: Reading hours digits.\n    count = 0;\n    while (index < len && count < 2 && (digit = DIGITS.indexOf(v.charAt(index))) !== -1) {\n        hours = 10 * hours + digit;\n        index++;\n        count++;\n    }\n    // 2: Wait for first minutes digit.\n    while (index < len && DIGITS.indexOf(v.charAt(index)) === -1) index++;\n    // 3: Reading minutes digits.\n    count = 0;\n    while (index < len && count < 2 && (digit = DIGITS.indexOf(v.charAt(index))) !== -1) {\n        minutes = 10 * minutes + digit;\n        count++;\n        index++;\n    }\n    // 4: Wait for first seconds digit.\n    while (index < len && DIGITS.indexOf(v.charAt(index)) === -1) index++;\n    // 5: Reading seconds digits.\n    count = 0;\n    while (index < len && count < 2 && (digit = DIGITS.indexOf(v.charAt(index))) !== -1) {\n        seconds = 10 * seconds + digit;\n        index++;\n        count++;\n    }\n\n    var d = new Date(0);\n    d.setHours(hours);\n    d.setMinutes(minutes);\n    d.setSeconds(seconds);\n    return d;\n}\n\nfunction dateConverter(v) {\n    if (v instanceof Date) return v;\n}\n\nfunction isZeroConverter(v) {\n    return v === 0;\n}\n\nfunction isNullConverter(v) {\n    if (isNaN(v)) return true;\n    return !v ? true : false;\n}\n\nfunction isStrictlyPositiveConverter(v_) {\n    const v = typeof _v === \"number\" ? _v : parseFloat(v_);\n    if (isNaN(v)) return false;\n    return v > 0;\n}\n\n\nmodule.exports._ = _;\n})"]}