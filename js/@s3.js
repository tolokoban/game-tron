<<<<<<< HEAD
"use strict";function addListener(t,e){window.addEventListener?window.addEventListener(t,e,!1):window.attachEvent("on"+t,e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t){const e="node://".length,n={},r={},i="function"==typeof window.require?window.require:null,o=function(s,a){if("node://"===s.substr(0,e)){if(!i)throw Error("[require] NodeJS is not available to load module "+s.substr(e));return i(s.substr(e))}if("function"==typeof a)return r[s]=a,a;const c=r[s];if(void 0===c){const u=new Error("Required module is missing: "+s);throw console.error(u.stack),u}var l=n[s];if(void 0===l){l={exports:{}};const h=l.exports;c.call(t,o,l,h),n[s]=l.exports,l=l.exports}return l};t.APP={},t.require=o}(this),addListener("DOMContentLoaded",function(){document.body.parentNode.$data={},APP=require("s3.app"),setTimeout(function(){"function"==typeof APP.start&&APP.start()})}),require("$",function(t,e,n){function r(t,e){var n=t;if(1<e.length){for(var r,i="",o=0,s=0;s<t.length;s++)if("$"===(r=t.charAt(s))){i+=t.substring(o,s),s++;var a=t.charCodeAt(s)-48;i+=0>a||a>=e.length?"$".concat(t.charAt(s)):e[a],o=s+1}else"\\"===r&&(i+=t.substring(o,s),s++,i+=t.charAt(s),o=s+1);i+=t.substr(o),n=i}return n}n.config={name:'"game-tron"',description:'"Step by step making-of tron like game."',author:'"tolokoban"',version:'"0.0.8"',major:"0",minor:"0",revision:"8",date:"2019-03-02T12:47:57.900Z",consts:{}},n.lang=function(t){var e=t;return void 0===e&&(window.localStorage&&(e=window.localStorage.getItem("Language")),!e&&!(e=window.navigator.language)&&!(e=window.navigator.browserLanguage)&&(e="fr"),e=e.substr(0,2).toLowerCase()),window.localStorage&&window.localStorage.setItem("Language",e),e},n.intl=function(t,e){var i=t[n.lang()],o=e[0],s=Object.keys(t)[0];if(!s)return o;if(!i&&!(i=t[s]))return o;var a=i[o];return a||(i=t[s],a=i[o]),a?r(a,e):o}}),require("s3.app",function(t,e,n){function r(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:512,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:512,n=new c(5,55);return n.move(0,e-110),n.add(),n.move(50,0),n.add(),n.move(0,50),n.add(),n.move(t-110,0),n.add(),n.move(0,-50),n.add(),n.move(50,0),n.add(),n.move(0,110-e),n.add(),n.move(-50,0),n.add(),n.move(0,-50),n.add(),n.move(110-t,0),n.add(),n.move(0,50),n.add(),n.move(-50,0),[n]}function i(t,e,n){t.beginPath(),t.moveTo(e.firstX,e.firstY),e.foreachTail(function(e,n){return t.lineTo(e,n)}),t.strokeStyle=n,t.stroke()}var o=t("dom"),s=t("s3.car"),a=t("s3.tron.action"),c=t("s3.polyline");n.start=function(){function t(e){window.requestAnimationFrame(t),c.clearRect(0,0,n.width,n.height);var r=!0,o=!1,s=void 0;try{for(var a,u,l=d[Symbol.iterator]();!(r=(a=l.next()).done);r=!0)u=a.value,i(c,u,"#fff")}catch(t){o=!0,s=t}finally{try{r||null==l.return||l.return()}finally{if(o)throw s}}for(var h,f=0;f<p.length;f++)if(h=p[f],!h.isDead){i(c,h.polyline,h.color);var v=h.polyline.lastX,m=h.polyline.lastY;h.move(e);for(var g,y=h.polyline.lastX,b=h.polyline.lastY,w=0;w<p.length;w++)if(g=p[w],!g.isDead&&g.polyline.collide(v,m,y,b)){h.isDead=!0,console.log("DEAD!");break}if(!h.isDead){var _=!0,T=!1,E=void 0;try{for(var x,A,P=d[Symbol.iterator]();!(_=(x=P.next()).done);_=!0)if(A=x.value,A.collide(v,m,y,b)){h.isDead=!0,console.log("DEAD in boundary!");break}}catch(t){T=!0,E=t}finally{try{_||null==P.return||P.return()}finally{if(T)throw E}}}}}for(var e,n=o("canvas"),c=n.getContext("2d"),u=new s({action:a.create({type:"keyboard"}),x:12,y:200,dir:1,color:"#ff0"}),l=new s({action:a.create({type:"ai",targets:[u]}),reaction:100,x:500,y:312,dir:3,color:"#0ff"}),h=new s({action:a.create({type:"ai",targets:[u]}),reaction:200,x:256,y:12,dir:2,color:"#f0f"}),f=new s({action:a.create({type:"ai",targets:[u]}),reaction:300,x:312,y:500,dir:0,color:"#f84"}),p=[u,l,h,f],d=r(),v=[l,h,f],m=0;m<v.length;m++)e=v[m],e.action.car=e,e.action.cars=p,e.action.boundaries=d;n.setAttribute("width",n.clientWidth),n.setAttribute("height",n.clientHeight),window.requestAnimationFrame(t)},e.exports._=function(){return""}}),require("s3.polyline",function(t,e){function n(t,e,n){if(e===n)return!1;for(var r=this._arr,i=(this._start+2)%this._capacity,o=this.firstX===r[i]?2:0,s=Math.min(e,n),a=Math.max(e,n),c=o;c<this._length;c+=4){var u=(c+this._start)%this._length,l=r[u],h=r[u+1],f=(u+2)%this._length,p=r[f];if(l===p)break;var d=Math.min(l,p),v=Math.max(l,p);if(!(t<=d||t>=v||h<s||h>a))return!0}return!1}function r(t,e,n){if(e===n)return!1;for(var r=this._arr,i=(this._start+2+1)%this._capacity,o=this.firstY===r[i]?2:0,s=Math.min(e,n),a=Math.max(e,n),c=o;c<this._length;c+=4){var u=(c+this._start)%this._length,l=r[u+1],h=r[u],f=(u+2)%this._length,p=r[f+1];if(l===p)break;var d=Math.min(l,p),v=Math.max(l,p);if(!(t<=d||t>=v||h<s||h>a))return!0}return!1}var i=t("common"),o=i.readonly,s=2,a=function(){function t(e,n){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:128;_classCallCheck(this,t);var i=new Float32Array(r<<1);i[0]=e,i[1]=n,i[2]=e,i[3]=n,this._arr=i,this._start=0,this._length=s<<1,this._capacity=r<<1,o(this,{length:function(){return this._length>>1},firstX:function(){return this._arr[this._start]},firstY:function(){return this._arr[this._start+1]},lastX:function(){return this._arr[(this._start+this._length-s)%this._capacity]},lastY:function(){return this._arr[(this._start+this._length-s+1)%this._capacity]}})}return _createClass(t,[{key:"foreachTail",value:function(t){for(var e,n=this._arr,r=s;r<this._length;r+=s)e=(r+this._start)%this._length,t(n[e],n[e+1])}},{key:"move",value:function(t,e){var n=(this._start+this._length-s)%this._capacity;this._arr[n]+=t,this._arr[n+1]+=e}},{key:"add",value:function(){var t=(this._start+this._length-s)%this._capacity,e=this._arr,n=e[t],r=e[t+1];if(this._length<this._capacity){var i=(t+s)%this._capacity;e[i]=n,e[i+1]=r,this._length+=s}else{var o=this._start;e[o]=n,e[o+1]=r,this._start=(this._start+s)%this._capacity}}},{key:"collide",value:function(t,e,i,o){return t===i?n.call(this,t,e,o):r.call(this,e,t,i)}}]),t}();e.exports=a,e.exports._=function(){return""}}),require("common",function(t,e){function n(t,e,r){return"string"==typeof e?void("function"==typeof r?Object.defineProperty(t,e,{get:r,set:function(){},configurable:!1,enumerable:!0}):Object.defineProperty(t,e,{value:r,writable:!1,configurable:!1,enumerable:!0})):void Object.keys(e).forEach(function(r){n(t,r,e[r])})}e.exports={readonly:n},e.exports._=function(){return""}}),require("s3.tron.action",function(t,e,n){var r=t("s3.tron.action.keyboard"),i=t("s3.tron.action.ai");n.create=function(t){switch(t.type){case"keyboard":return r.create(t);case"ai":return i.create(t);default:return null}},e.exports._=function(){return""}}),require("s3.tron.action.ai",function(t,e,n){function r(){return 1e3*Math.random()}var i=t("common"),o=i.readonly,s=0,a=1,c=2,u=3,l=function(){function t(e){var n=e.car,r=e.cars,i=e.boundaries,l=e.reaction,h=void 0===l?150:l,f=e.frontRadar,p=void 0===f?10:f,d=e.sideRadar,v=void 0===d?20:d;_classCallCheck(this,t);var m=this;this.status=s,this.car=n,this.cars=r,this.boundaries=i,this.lastTime=0,o(this,{reaction:h,frontRadar:p,sideRadar:v,actionRight:function(){return m.status===c},actionLeft:function(){return m.status===a},actionAccel:function(){return m.status===u}})}return _createClass(t,[{key:"process",value:function(t){if(t-this.lastTime<this.reaction)return void(this.status=s);var e=this.car,n=e.polyline.lastX,i=e.polyline.lastY,o=n+e.vx*this.frontRadar,a=i+e.vy*this.frontRadar;if(this.collide(n,i,o,a))r()<500?this.turnRightIfSafe():this.turnLeftIfSafe();else{var c=r();3>c?this.turnRightIfSafe():6>c?this.turnLeftIfSafe():this.status=8>c?u:s}this.status!==s&&(this.lastTime=t)}},{key:"turnRightIfSafe",value:function(){var t=this.car,e=t.polyline.lastX,n=t.polyline.lastY,r=e+t.vxRight*this.sideRadar,i=n+t.vyRight*this.sideRadar;this.status=this.collide(e,n,r,i)?s:c}},{key:"turnLeftIfSafe",value:function(){var t=this.car,e=t.polyline.lastX,n=t.polyline.lastY,r=e+t.vxLeft*this.sideRadar,i=n+t.vyLeft*this.sideRadar;this.status=this.collide(e,n,r,i)?s:a}},{key:"collide",value:function(t,e,n,r){var i=!0,o=!1,s=void 0;try{for(var a,c,u=this.cars[Symbol.iterator]();!(i=(a=u.next()).done);i=!0)if(c=a.value,!c.isDead&&c.polyline.collide(t,e,n,r))return!0}catch(t){o=!0,s=t}finally{try{i||null==u.return||u.return()}finally{if(o)throw s}}var l=!0,h=!1,f=void 0;try{for(var p,d,v=this.boundaries[Symbol.iterator]();!(l=(p=v.next()).done);l=!0)if(d=p.value,d.collide(t,e,n,r))return!0}catch(t){h=!0,f=t}finally{try{l||null==v.return||v.return()}finally{if(h)throw f}}return!1}}]),t}();n.create=function(t){return new l(t)},e.exports._=function(){return""}}),require("s3.tron.action.keyboard",function(t,e){function n(){o.isLoaded||(o.isLoaded=!0,document.addEventListener("keydown",function(t){if(!t.repeat)switch(t.key){case e.exports.RightKey:o.rightPressed=!0,t.preventDefault();break;case e.exports.LeftKey:o.leftPressed=!0,t.preventDefault();break;case e.exports.AccelKey:o.accelPressed=!0,t.preventDefault()}},!0),document.addEventListener("keyup",function(t){switch(t.key){case o.RightKey:case o.LeftKey:case o.AccelKey:t.preventDefault()}},!0))}e.exports={create:function(t){return new s(t)},RightKey:"ArrowRight",LeftKey:"ArrowLeft",AccelKey:" "};var r=t("common"),i=r.readonly,o={isLoaded:!1,rightPressed:!1,leftPressed:!1,accelPressed:!1},s=function(){function t(){_classCallCheck(this,t),i(this,{actionRight:function(){var t=o.rightPressed;return o.rightPressed=!1,t},actionLeft:function(){var t=o.leftPressed;return o.leftPressed=!1,t},actionAccel:function(){var t=o.accelPressed;return o.accelPressed=!1,t}}),n()}return _createClass(t,[{key:"process",value:function(){}}]),t}();e.exports._=function(){return""}}),require("s3.car",function(t,e){var n=t("s3.polyline"),r=t("common"),i=r.readonly,o=0,s=1,a=[[0,-1],[1,0],[0,1],[-1,0]],c=a.length,u=1,l=3,h=function(){function t(e){var r=e.action,h=e.x,f=void 0===h?0:h,p=e.y,d=void 0===p?256:p,v=e.dir,m=void 0===v?u:v,g=e.color,y=void 0===g?"cyan":g,b=e.minSpeed,w=void 0===b?.05:b,_=e.maxSpeed,T=void 0===_?.25:_,E=e.breakPower,x=void 0===E?5e-4:E;_classCallCheck(this,t);var A=this;this.action=r,this.speed=w,this.lastTime=0,this.dir=m,i(this,{minSpeed:w,maxSpeed:T,breakPower:x,color:y,polyline:new n(f,d),dirRight:function(){return(A.dir+u)%c},dirLeft:function(){return(A.dir+l)%c},vx:function(){return a[A.dir][o]},vy:function(){return a[A.dir][s]},vxRight:function(){return a[A.dirRight][o]},vyRight:function(){return a[A.dirRight][s]},vxLeft:function(){return a[A.dirLeft][o]},vyLeft:function(){return a[A.dirLeft][s]}})}return _createClass(t,[{key:"move",value:function(t){if(0===this.lastTime)return void(this.lastTime=t);var e=t-this.lastTime;this.lastTime=t,this.action.process(t,e),this.speed>this.minSpeed&&(this.speed=Math.max(this.minSpeed,this.speed-this.breakPower*e));var n=this.action;n.actionRight?(this.polyline.add(),this.dir=(this.dir+u)%a.length):n.actionLeft&&(this.polyline.add(),this.dir=(this.dir+l)%a.length),n.actionAccel&&(this.speed=this.maxSpeed);var r=a[this.dir],i=this.speed*e*r[0],o=this.speed*e*r[1];this.polyline.move(i,o)}}]),t}();e.exports=h,e.exports._=function(){return""}}),require("dom",function(t,e){function n(t){if(t instanceof Node)return t;if(void 0===t||null===t)throw Error("`dom` is not a valid element!",t);if(t.$ instanceof Node)return t.$;if(t.element instanceof Node)return t.element;if("string"==typeof t){var e=document.getElementById(t);return e||console.error("[dom] There is no DOM element with this ID: `"+t+"`"),e}return"function"==typeof t.element?t.element():t}function r(t,e){t=n(t);var r,i;for(r in e)i=e[r],t.style[r]=i;return t}function i(t,e,r){t=n(t);var i,o;for(i in"string"==typeof e&&(void 0===r&&(r=""),i=e,e={},e[i]=r),e)o=e[i],t.setAttribute(i,o);return t}function o(t){t=n(t);try{var e,r;for(e=1;e<arguments.length;e++)r=arguments[e],c(t,r)||a(t,r)||s(t,r)||console.error("Argument #"+e+" of dom.add() is invalid!",arguments);return t}catch(t){console.error("[DOM.add] arguments=",[].slice.call(arguments)),console.error("[DOM.add] exception=",t)}}function s(t,e){return!!((e=n(e))instanceof Node)&&(t.appendChild(e),!0)}function a(t,e){if("number"==typeof e&&(e=""+e),"string"!=typeof e)return!1;if("<html>"==e.substr(0,6).toLowerCase()){var r=e.substr(6);e=n.tag("span"),e.innerHTML=r}else if(T.test(e)){var i=e;e=n.tag("span"),e.innerHTML=i}else e=document.createTextNode(e);return t.appendChild(e),!0}function c(t,e){return!!Array.isArray(e)&&(e.forEach(function(e){o(t,e)}),!0)}function u(t){if(Array.isArray(t))return t.forEach(function(t){u(t)}),t;if(void 0===t[_])return t;var e=t[_].events;return void 0===e?t:(e.off(),void delete t[_].events)}function l(t,e,r){if("function"==typeof e||null===e)e={tap:e};else if("string"==typeof e&&"function"==typeof r){var i={};i[e]=r,e=i}if(Array.isArray(t))return t.forEach(function(t){l(t,e)}),t;t=n(t),void 0===t[_]&&(t[_]={}),void 0===t[_].events&&(t[_].events=w(t));var o,s,a;for(o in e)s=e[o],"!"==o.charAt(0)?(o=o.substr(1),a=!0):a=!1,-1<E.indexOf(o.toLowerCase())?t.addEventListener(o,s,a):t[_].events.on(o,s,a);return t}function h(t,e){try{var r,i,s,a,c=document.createElementNS(t,e.trim().toLowerCase());for(r=2;r<arguments.length;r++)if(i=arguments[r],Array.isArray(i))i.forEach(function(t){switch(_typeof(t)){case"string":case"number":case"boolean":if(t=""+t,"<html>"==t.substr(0,6)){var e=t.substr(6);t=n.tag("span"),t.innerHTML=e}else t=document.createTextNode(t)}o(c,t)});else switch(_typeof(i)){case"string":i.split(" ").forEach(function(t){0<t.length&&f(c,t)});break;case"object":for(s in i)a=i[s],c.setAttribute(s,a);break;default:throw Error("[dom.tag] Error creating <"+e+">: Invalid argument #"+r+"!")}return c}catch(n){console.error("[dom.tagNS] Error with `ns` = ",t," and `name` = ",e),console.error(n)}}function f(t){var e=[].slice.call(arguments,1);return Array.isArray(t)?(e.unshift(null),t.forEach(function(t){e[0]=t,f.apply(void 0,e)}),t):(t=n(t),e.forEach(function(e){if("string"==typeof e&&(e=e.trim(),0!=e.length))try{t.classList&&t.classList.add(e)}catch(t){console.error("[dom.addClass] Invalid class name: ",e),console.error(t)}}),t)}function p(t,e){return t=n(t),!!t.classList&&t.classList.contains(e)}function d(t){var e=[].slice.call(arguments,1);return Array.isArray(t)?(e.unshift(null),t.forEach(function(t){e[0]=t,d.apply(void 0,e)}),t):(t=n(t),e.forEach(function(e){if("string"==typeof e)try{t.classList&&t.classList.remove(e)}catch(t){console.error("[dom.removeClass] Invalid class name: ",e),console.error(t)}}),t)}function v(t){return[].slice.call(arguments,1).forEach(function(e){p(t,e)?d(t,e):f(t,e)}),t}function m(t){return Array.isArray(t)?void t.forEach(function(t){t=n(t),void 0===t[_]&&(t[_]={}),Array.isArray(t[_].style)||(t[_].style=[]),t[_].style.push(JSON.stringify(t.style))}):m(Array.prototype.slice.call(arguments))}function g(t){return Array.isArray(t)?void t.forEach(function(t){if(t=n(t),void 0===t[_]||!Array.isArray(t[_].style))throw Error("[dom.restoreStyle] `saveStyle()` has never been used on this element!");if(0==t[_].style.length)throw Error("[dom.restoreStyle] more `restore` than `save`!");var e,r,i=JSON.parse(t[_].style.pop());for(e in i)void 0!==(r=i[e])&&(t.style[e]=r)}):g(Array.prototype.slice.call(arguments))}var y=function(){function e(){return r(n,arguments)}var n={en:{}},r=t("$").intl;return e.all=n,e}();t("polyfill.classList");var b=t("dom.theme"),w=t("tfw.gestures"),_="@dom"+Date.now(),T=/^&(#[0-9]+|[a-zA-Z0-9]+);$/;e.exports=n,n.tagNS=h,n.svgRoot=h.bind(void 0,"http://www.w3.org/2000/svg","svg",{version:"1.1","xmlns:svg":"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}),n.svg=h.bind(void 0,"http://www.w3.org/2000/svg"),n.tag=h.bind(void 0,"http://www.w3.org/1999/xhtml"),n.div=h.bind(void 0,"http://www.w3.org/1999/xhtml","div"),n.txt=window.document.createTextNode.bind(window.document),n.textOrHtml=function(t,e){return void 0===e&&(e=""),null===e&&(e=""),"string"!=typeof e&&(e=JSON.stringify(e)),"<html>"==e.substr(0,6)?t.innerHTML=e.substr(6):t.textContent=e,t},n.get=function(t,e){return t=n(t),void 0===e&&(e=t,t=window.document),t.querySelector(e)},n.elem=function(t){var e=[].slice.call(arguments);e.shift(),0==e.length&&(e=["div"]),e.push("dom","custom");var r;return void 0===e[0].element?"function"==typeof e[0].appendChild?(r=e[0],f(r,"dom","custom")):r=n.tag.apply(n,e):(r=e[0].element,f(r,"dom","custom")),Object.defineProperty(t,"element",{value:r,writable:!1,configurable:!1,enumerable:!0}),r},n.css=r,n.att=i,n.removeAtt=function(t,e){return t=n(t),t.removeAttribute(e),t},n.addClass=f,n.hasClass=p,n.removeClass=d,n.toggleClass=v,n.saveStyle=m,n.restoreStyle=g,n.registerTheme=b.register.bind(n),n.applyTheme=b.apply.bind(n),n.registerAndApplyTheme=function(t,e){b.register.call(this,t,e),b.apply.call(this,t)},n.replace=function(t,e){return t=n(t),e=n(e),e.parentNode.replaceChild(t,e),t},n.detach=function(t){t=n(t);var e=t.parentElement;return e?(e.removeChild(t),e):e},n.on=l,n.off=u,n.add=o,n.wrap=function(t,e,n){return Object.defineProperty(t,"element",{value:e,writable:!1,configurable:!1,enumerable:!0}),n?t:(t.on=l.bind(t,e),t.css=r.bind(t,e),t.add=o.bind(t,e),t.att=i.bind(t,e),t.addClass=f.bind(t,e),t.hasClass=p.bind(t,e),t.removeClass=d.bind(t,e),t.toggleClass=v.bind(t,e),t)},n.clear=function(t){t=n(t);for(var e=t;e.firstChild;)e.removeChild(e.firstChild);var r=[].slice.call(arguments);return 1<r.length&&o.apply(this,r),t};var E=["keyup","keydown","scroll","load","error"];e.exports._=y}),require("tfw.gestures",function(t,e){function n(t,e){for(var n=this._events[t].chain,r=0;r<n.length;r++)if(!0===(0,n[r])(e))return}function r(t,e){var r=l(t,"hammer.");r&&!this._hammer&&(this._hammer=new m(this.$,{domEvents:!0}),this._hammer.domEvents=!0);var i=this._events[t];if(!i){var o=n.bind(this,t);i={chain:[],handler:o},r?this._hammer.on(r,o):this.$.addEventListener(t,o),this._events[t]=i}i.chain.push(e)}function i(t,e){if("string"!=typeof t)throw Error("[Gestures.on] `name` must be a string: "+JSON(t)+"!");if(-1===v.indexOf(t))throw Error("Unknown gesture's name `"+t+"`!\nAvailable names are: "+v.join(", ")+".");if("function"!=typeof e)throw Error("Gesture `"+t+"` must have a function as slot!")}function o(t){if(t instanceof Node)return t;if(void 0===t||null===t)throw Error("Not a valid DOM element!",t);if(t.$ instanceof Node)return t.$;if(t.element instanceof Node)return t.element;if("string"==typeof t){var e=document.getElementById(t);return e||console.error("There is no DOM element with this ID: `"+t+"`"),e}return"function"==typeof t.element?t.element():t}function s(t,e){var n,r;n=e.center.x,r=e.center.y;var i=t.getBoundingClientRect();e.x=n-i.left,e.y=r-i.top}function a(t,e){var n,r;n=e.clientX,r=e.clientY;var i=t.getBoundingClientRect();return{x:n-i.left,y:r-i.top}}function c(t,e){e.vx=e.x-this._dragX,e.vy=e.y-this._dragY,e.x0=e.x-e.deltaX,e.y0=e.y-e.deltaY,this._dragX=e.x,this._dragY=e.y}function u(t){if(!t||!t.srcEvent)return 0;var e=t.srcEvent.buttons;return"number"==typeof e?e:0}function l(t,e){return t.substr(0,e.length)==e?t.substr(e.length):null}var h=function(){function e(){return r(n,arguments)}var n={en:{},fr:{}},r=t("$").intl;return e.all=n,e}();e.exports=function(t){var e=o(t);return e[p]||(e[p]=new g(e)),e[p]};var f={tap:function(t,e){var n=this;t("hammer.tap",function(t){return!(1!==t.tapCount||(s(n.$,t),e({x:t.x,y:t.y,target:t.target,preventDefault:t.preventDefault.bind(t)}),0))})},doubletap:function(t,e){var n=this;t("hammer.tap",function(t){return!(2!==t.tapCount||(s(n.$,t),e({x:t.x,y:t.y,target:t.target,preventDefault:t.preventDefault.bind(t)}),0))})},drag:function(t,e,n){var r=this;t("hammer.pan",function(t){if(t.isFinal)return!1;s(r.$,t),void 0===r._dragX&&(r._dragX=t.x,r._dragY=t.y,r._dragStart=!0),c.call(r,r.$,t);var i=t.srcEvent;return e({x:t.x,y:t.y,x0:t.x0,y0:t.y0,vx:t.vx,vy:t.vy,sx:t.velocityX,sy:t.velocityY,event:t,target:t.target,buttons:u(t),preventDefault:i.preventDefault.bind(i),stopPropagation:i.stopImmediatePropagation.bind(i)},n),!0})},dragstart:function(t,e){var n=this;t("hammer.panstart",function(t){console.log("START"),s.call(n,n.$,t);var r=t.srcEvent;return e({x:t.x,y:t.y,target:t.target,preventDefault:r.preventDefault.bind(r),stopPropagation:r.stopImmediatePropagation.bind(r)}),!0})},dragend:function(t,e){var n=this;t("hammer.panend",function(t){s(n.$,t),c.call(n,n.$,t);var r=t.srcEvent;return e({x:t.x,y:t.y,x0:t.x0,y0:t.y0,target:t.target,preventDefault:r.preventDefault.bind(r),stopPropagation:r.stopImmediatePropagation.bind(r)}),delete n._dragX,delete n._dragY,!0})},move:function(t,e){var n=this;t("mousemove",function(t){var r=a(n.$,t);r.preventDefault=t.preventDefault.bind(t),r.stopPropagation=t.stopPropagation.bind(t),r.event=t,e(r)})},down:function(t,e){var n=this;t("touchstart",function(t){if(!t.changedTouches||1>t.changedTouches.length)return!1;var r=t.changedTouches[0],i=n.$.getBoundingClientRect();try{e({x:r.clientX-i.left,y:r.clientY-i.top,preventDefault:t.preventDefault.bind(t),stopPropagation:t.stopPropagation.bind(t)})}catch(t){console.error(t)}return!0}),t("mousedown",function(t){if(350>Date.now()-n._touchstart)return t.preventDefault(),t.stopPropagation(),!1;var r=n.$.getBoundingClientRect();try{e({x:t.clientX-r.left,y:t.clientY-r.top,preventDefault:t.preventDefault.bind(t),stopPropagation:t.stopPropagation.bind(t)})}catch(t){console.error(t)}return n._touchstart=0,!0})},up:function(t,e){var n=this;t("touchend",function(t){if(!t.changedTouches||1>t.changedTouches.length)return!1;var r=t.changedTouches[0],i=n.$.getBoundingClientRect();try{e({x:r.clientX-i.left,y:r.clientY-i.top,preventDefault:t.preventDefault.bind(t),stopPropagation:t.stopPropagation.bind(t)})}catch(t){console.error(t)}return n._touchstart=Date.now(),!0}),t("mouseup",function(t){if(0<n._touchstart)return t.preventDefault(),t.stopPropagation(),!1;var r=n.$.getBoundingClientRect();try{e({x:t.clientX-r.left,y:t.clientY-r.top,preventDefault:t.preventDefault.bind(t),stopPropagation:t.stopPropagation.bind(t)})}catch(t){console.error(t)}return n._touchstart=0,!0})},wheel:function(t,e){var n=this;t(d,function(t){var r=a(n.$,t);r.delta=t.deltaY,"number"!=typeof r.delta&&(r.delta=-t.wheelDelta),r.preventDefault=t.preventDefault.bind(t),r.stopPropagation=t.stopPropagation.bind(t),e(r)})}},p=Symbol("__tfw.gestures__"),d=function(){return"onwheel"in document.createElement("div")?"wheel":void 0===document.onmousewheel?"DOMMouseScroll":"mousewheel"}(),v=Object.keys(f),m=t("external.hammer"),g=function(){function t(e){_classCallCheck(this,t),Object.defineProperty(this,"$",{writable:!1,value:e,configurable:!1}),this._events={},this._touchstart=0}return _createClass(t,[{key:"on",value:function(t,e,n){var o="function"==typeof t,s=o?"tap":t,a=o?t:e,c=o?e:n;try{return i(s,a),f[s].call(this,r.bind(this),a,c),this}catch(t){throw console.error("[Gesture.on( name, slot, args )]"),console.error("   name",s),console.error("   slot",a),console.error("   args",c),console.error("   ERROR",t),Error(t)}}}]),t}();e.exports._=h}),require("external.hammer",function(t,e){var n=function(){function e(){return r(n,arguments)}var n={en:{},fr:{}},r=t("$").intl;return e.all=n,e}();(function(t,n,r){function i(t,e,n){return setTimeout(u(t,n),e)}function o(t,e,n){return!!Array.isArray(t)&&(s(t,n[e],n),!0)}function s(t,e,n){if(t)if(t.forEach)t.forEach(e,n);else if(void 0!==t.length)for(r=0;r<t.length;)e.call(n,t[r],r,t),r++;else for(var r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}function a(e,n,r){return function(){var i=new Error("get-stack-trace"),o=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",s=t.console&&(t.console.warn||t.console.log);return s&&s.call(t.console,"DEPRECATED METHOD: "+n+"\n"+r+" AT \n",o),e.apply(this,arguments)}}function c(t,e,n){var r=e.prototype,i=t.prototype=Object.create(r);i.constructor=t,i._super=r,n&&lt(i,n)}function u(t,e){return function(){return t.apply(e,arguments)}}function l(t,e){return"function"==_typeof(t)?t.apply(e?e[0]||void 0:void 0,e):t}function h(t,e){return void 0===t?e:t}function f(t,e,n){s(m(e),function(e){t.addEventListener(e,n,!1)})}function p(t,e,n){s(m(e),function(e){t.removeEventListener(e,n,!1)})}function d(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function v(t,e){return-1<t.indexOf(e)}function m(t){return t.trim().split(/\s+/g)}function g(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var r=0;r<t.length;){if(n&&t[r][n]==e||!n&&t[r]===e)return r;r++}return-1}function y(t){return Array.prototype.slice.call(t,0)}function b(t,e,n){for(var r,i=[],o=[],s=0;s<t.length;)r=e?t[s][e]:t[s],0>g(o,r)&&i.push(t[s]),o[s]=r,s++;return n&&(i=e?i.sort(function(t,n){return t[e]>n[e]}):i.sort()),i}function w(t,e){for(var n=e[0].toUpperCase()+e.slice(1),r=0;r<ht.length;){var i=ht[r],o=i?i+n:e;if(o in t)return o;r++}}function _(){return yt++}function T(e){var n=e.ownerDocument||e;return n.defaultView||n.parentWindow||t}function E(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){l(t.options.enable,[t])&&n.handler(e)},this.init()}function x(t){var e=t.options.inputClass;return new(e||(_t?Y:Tt?$:wt?H:X))(t,A)}function A(t,e,n){var r=n.pointers.length,i=n.changedPointers.length,o=1&e&&0==r-i;n.isFirst=!!o,n.isFinal=!!(12&e&&0==r-i),o&&(t.session={}),n.eventType=e,P(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function P(t,e){var n=t.session,r=e.pointers,i=r.length;n.firstInput||(n.firstInput=D(e)),1<i&&!n.firstMultiple?n.firstMultiple=D(e):1===i&&(n.firstMultiple=!1);var o=n.firstInput,s=n.firstMultiple,a=s?s.center:o.center,c=e.center=k(r);e.timeStamp=vt(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=N(a,c),e.distance=R(a,c),C(n,e),e.offsetDirection=I(e.deltaX,e.deltaY);var u=L(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=u.x,e.overallVelocityY=u.y,e.overallVelocity=dt(u.x)>dt(u.y)?u.x:u.y,e.scale=s?M(s.pointers,r):1,e.rotation=s?O(s.pointers,r):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,S(n,e);var l=t.element;d(e.srcEvent.target,l)&&(l=e.srcEvent.target),e.target=l}function C(t,e){var n=e.center,r=t.offsetDelta||{},i=t.prevDelta||{},o=t.prevInput||{};(1===e.eventType||4===o.eventType)&&(i=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=i.x+(n.x-r.x),e.deltaY=i.y+(n.y-r.y)}function S(t,e){var n,r,i,o,s=t.lastInterval||e,a=e.timeStamp-s.timeStamp;if(8!==e.eventType&&(a>25||void 0===s.velocity)){var c=e.deltaX-s.deltaX,u=e.deltaY-s.deltaY,l=L(a,c,u);r=l.x,i=l.y,n=dt(l.x)>dt(l.y)?l.x:l.y,o=I(c,u),t.lastInterval=e}else n=s.velocity,r=s.velocityX,i=s.velocityY,o=s.direction;e.velocity=n,e.velocityX=r,e.velocityY=i,e.direction=o}function D(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:pt(t.pointers[n].clientX),clientY:pt(t.pointers[n].clientY)},n++;return{timeStamp:vt(),pointers:e,center:k(e),deltaX:t.deltaX,deltaY:t.deltaY}}function k(t){var e=t.length;if(1===e)return{x:pt(t[0].clientX),y:pt(t[0].clientY)};for(var n=0,r=0,i=0;i<e;)n+=t[i].clientX,r+=t[i].clientY,i++;return{x:pt(n/e),y:pt(r/e)}}function L(t,e,n){return{x:e/t||0,y:n/t||0}}function I(t,e){return t===e?1:dt(t)>=dt(e)?0>t?2:4:0>e?8:16}function R(t,e,n){n||(n=Et);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return Math.sqrt(r*r+i*i)}function N(t,e,n){n||(n=Et);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return 180*Math.atan2(i,r)/Math.PI}function O(t,e){return N(e[1],e[0],xt)+N(t[1],t[0],xt)}function M(t,e){return R(e[0],e[1],xt)/R(t[0],t[1],xt)}function X(){this.evEl="mousedown",this.evWin="mousemove mouseup",this.pressed=!1,E.apply(this,arguments)}function Y(){this.evEl=St,this.evWin=Dt,E.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function q(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,E.apply(this,arguments)}function F(t,e){var n=y(t.touches),r=y(t.changedTouches);return 12&e&&(n=b(n.concat(r),"identifier",!0)),[n,r]}function $(){this.evTarget="touchstart touchmove touchend touchcancel",this.targetIds={},E.apply(this,arguments)}function j(t,e){var n=y(t.touches),r=this.targetIds;if(3&e&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,o,s=y(t.changedTouches),a=[],c=this.target;if(o=n.filter(function(t){return d(t.target,c)}),1===e)for(i=0;i<o.length;)r[o[i].identifier]=!0,i++;for(i=0;i<s.length;)r[s[i].identifier]&&a.push(s[i]),12&e&&delete r[s[i].identifier],i++;return a.length?[b(o.concat(a),"identifier",!0),a]:void 0}function H(){E.apply(this,arguments);var t=u(this.handler,this);this.touch=new $(this.manager,t),this.mouse=new X(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function B(t,e){1&t?(this.primaryTouch=e.changedPointers[0].identifier,z.call(this,e)):12&t&&z.call(this,e)}function z(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var r=this.lastTouches,i=function(){var t=r.indexOf(n);-1<t&&r.splice(t,1)};setTimeout(i,2500)}}function G(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],o=Math.abs(e-i.x),s=Math.abs(n-i.y);if(o<=25&&s<=25)return!0}return!1}function W(t,e){this.manager=t,this.set(e)}function U(t){if(v(t,"none"))return"none";var e=v(t,"pan-x"),n=v(t,"pan-y");return e&&n?"none":e||n?e?"pan-x":"pan-y":v(t,"manipulation")?"manipulation":"auto"}function V(t){
this.options=lt({},this.defaults,t||{}),this.id=_(),this.manager=null,this.options.enable=h(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function K(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}function J(t){return 16==t?"down":8==t?"up":2==t?"left":4==t?"right":""}function Z(t,e){var n=e.manager;return n?n.get(t):t}function Q(){V.apply(this,arguments)}function tt(){Q.apply(this,arguments),this.pX=null,this.pY=null}function et(){Q.apply(this,arguments)}function nt(){V.apply(this,arguments),this._timer=null,this._input=null}function rt(){Q.apply(this,arguments)}function it(){Q.apply(this,arguments)}function ot(){V.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function st(t,e){return e=e||{},e.recognizers=h(e.recognizers,st.defaults.preset),new at(t,e)}function at(t,e){this.options=lt({},st.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=x(this),this.touchAction=new W(this,this.options.touchAction),ct(this,!0),s(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function ct(t,e){var n=t.element;if(n.style){var r;s(t.options.cssProps,function(i,o){r=w(n.style,o),e?(t.oldCssProps[r]=n.style[r],n.style[r]=i):n.style[r]=t.oldCssProps[r]||""}),e||(t.oldCssProps={})}}function ut(t,e){var r=n.createEvent("Event");r.initEvent(t,!0,!0),r.gesture=e,e.target.dispatchEvent(r)}var lt,ht=["","webkit","Moz","MS","ms","o"],ft=n.createElement("div"),pt=Math.round,dt=Math.abs,vt=Date.now;lt="function"==typeof Object.assign?Object.assign:function(t){if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e,n=Object(t),r=1;r<arguments.length;r++)if(void 0!==(e=arguments[r])&&null!==e)for(var i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);return n};var mt=a(function(t,e,n){for(var r=Object.keys(e),i=0;i<r.length;)(!n||n&&void 0===t[r[i]])&&(t[r[i]]=e[r[i]]),i++;return t},"extend","Use `assign`."),gt=a(function(t,e){return mt(t,e,!0)},"merge","Use `assign`."),yt=1,bt=/mobile|tablet|ip(ad|hone|od)|android/i,wt="ontouchstart"in t,_t=void 0!==w(t,"PointerEvent"),Tt=wt&&bt.test(navigator.userAgent),Et=["x","y"],xt=["clientX","clientY"];E.prototype={handler:function(){},init:function(){this.evEl&&f(this.element,this.evEl,this.domHandler),this.evTarget&&f(this.target,this.evTarget,this.domHandler),this.evWin&&f(T(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&p(this.element,this.evEl,this.domHandler),this.evTarget&&p(this.target,this.evTarget,this.domHandler),this.evWin&&p(T(this.element),this.evWin,this.domHandler)}};var At={mousedown:1,mousemove:2,mouseup:4};c(X,E,{handler:function(t){var e=At[t.type];1&e&&2!==t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var Pt={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},Ct={2:"touch",3:"pen",4:"mouse",5:"kinect"},St="pointerdown",Dt="pointermove pointerup pointercancel";t.MSPointerEvent&&!t.PointerEvent&&(St="MSPointerDown",Dt="MSPointerMove MSPointerUp MSPointerCancel"),c(Y,E,{handler:function(t){var e=this.store,n=!1,r=t.type.toLowerCase().replace("ms",""),i=Pt[r],o=Ct[t.pointerType]||t.pointerType,s=g(e,t.pointerId,"pointerId");1&i&&(2!==t.button||"touch"==o)?0>s&&(e.push(t),s=e.length-1):12&i&&(n=!0),0>s||(e[s]=t,this.callback(this.manager,i,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),n&&e.splice(s,1))}});var kt={touchstart:1,touchmove:2,touchend:4,touchcancel:8};c(q,E,{handler:function(t){var e=kt[t.type];if(1===e&&(this.started=!0),!!this.started){var n=F.call(this,t,e);12&e&&0==n[0].length-n[1].length&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}}});var Lt={touchstart:1,touchmove:2,touchend:4,touchcancel:8};c($,E,{handler:function(t){var e=Lt[t.type],n=j.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}}),c(H,E,{handler:function(t,e,n){var r="touch"==n.pointerType,i="mouse"==n.pointerType;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)B.call(this,e,n);else if(i&&G.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var It=w(ft.style,"touchAction"),Rt=void 0!==It,Nt=function(){if(!Rt)return!1;var e={},n=t.CSS&&t.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(r){e[r]=!n||t.CSS.supports("touch-action",r)}),e}();W.prototype={set:function(t){"compute"==t&&(t=this.compute()),Rt&&this.manager.element.style&&Nt[t]&&(this.manager.element.style[It]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return s(this.manager.recognizers,function(e){l(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),U(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)return void e.preventDefault();var r=this.actions,i=v(r,"none")&&!Nt.none,o=v(r,"pan-y")&&!Nt["pan-y"],s=v(r,"pan-x")&&!Nt["pan-x"];if(i){var a=1===t.pointers.length,c=2>t.distance,u=250>t.deltaTime;if(a&&c&&u)return}return s&&o?void 0:i||o&&6&n||s&&24&n?this.preventSrc(e):void 0},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};V.prototype={defaults:{},set:function(t){return lt(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(o(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=Z(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return o(t,"dropRecognizeWith",this)?this:(t=Z(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(o(t,"requireFailure",this))return this;var e=this.requireFail;return t=Z(t,this),-1===g(e,t)&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(o(t,"dropRequireFailure",this))return this;t=Z(t,this);var e=g(this.requireFail,t);return-1<e&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return 0<this.requireFail.length},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){function e(e){n.manager.emit(e,t)}var n=this,r=this.state;r<8&&e(n.options.event+K(r)),e(n.options.event),t.additionalEvent&&e(t.additionalEvent),r>=8&&e(n.options.event+K(r))},tryEmit:function(t){return this.canEmit()?this.emit(t):void(this.state=32)},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(33&this.requireFail[t].state))return!1;t++}return!0},recognize:function(t){var e=lt({},t);return l(this.options.enable,[this,e])?(56&this.state&&(this.state=1),this.state=this.process(e),void(30&this.state&&this.tryEmit(e))):(this.reset(),void(this.state=32))},process:function(){},getTouchAction:function(){},reset:function(){}},c(Q,V,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,r=6&e,i=this.attrTest(t);return r&&(8&n||!i)?16|e:r||i?4&n?8|e:2&e?4|e:2:32}}),c(tt,Q,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var t=this.options.direction,e=[];return 6&t&&e.push("pan-y"),24&t&&e.push("pan-x"),e},directionTest:function(t){var e=this.options,n=!0,r=t.distance,i=t.direction,o=t.deltaX,s=t.deltaY;return i&e.direction||(6&e.direction?(i=0===o?1:0>o?2:4,n=o!=this.pX,r=Math.abs(t.deltaX)):(i=0===s?1:0>s?8:16,n=s!=this.pY,r=Math.abs(t.deltaY))),t.direction=i,n&&r>e.threshold&&i&e.direction},attrTest:function(t){return Q.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=J(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),c(et,Q,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},emit:function(t){if(1!==t.scale){var e=1>t.scale?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),c(nt,V,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,o=t.deltaTime>e.time;if(this._input=t,!r||!n||12&t.eventType&&!o)this.reset();else if(1&t.eventType)this.reset(),this._timer=i(function(){this.state=8,this.tryEmit()},e.time,this);else if(4&t.eventType)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){8!==this.state||(t&&4&t.eventType?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=vt(),this.manager.emit(this.options.event,this._input)))}}),c(rt,Q,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)}}),c(it,Q,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return tt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return 30&n?e=t.overallVelocity:6&n?e=t.overallVelocityX:24&n&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&dt(e)>this.options.velocity&&4&t.eventType},emit:function(t){var e=J(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),c(ot,V,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return["manipulation"]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,o=t.deltaTime<e.time;if(this.reset(),1&t.eventType&&0===this.count)return this.failTimeout();if(r&&o&&n){if(4!=t.eventType)return this.failTimeout();var s=!this.pTime||t.timeStamp-this.pTime<e.interval,a=!this.pCenter||R(this.pCenter,t.center)<e.posThreshold;this.pTime=t.timeStamp,this.pCenter=t.center,a&&s?this.count+=1:this.count=1,this._input=t;if(0==this.count%e.taps)return this.hasRequireFailures()?(this._timer=i(function(){this.state=8,this.tryEmit()},e.interval,this),2):8}return 32},failTimeout:function(){return this._timer=i(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),st.VERSION="2.0.8",st.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[rt,{enable:!1}],[et,{enable:!1},["rotate"]],[it,{direction:6}],[tt,{direction:6},["swipe"]],[ot],[ot,{event:"doubletap",taps:2},["tap"]],[nt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};at.prototype={set:function(t){return lt(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var n,r=this.recognizers,i=e.curRecognizer;(!i||i&&8&i.state)&&(i=e.curRecognizer=null);for(var o=0;o<r.length;)n=r[o],2===e.stopped||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(t),!i&&14&n.state&&(i=e.curRecognizer=n),o++}},get:function(t){if(t instanceof V)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(o(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(o(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=g(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(void 0!==t&&void 0!==e){var n=this.handlers;return s(m(t),function(t){n[t]=n[t]||[],n[t].push(e)}),this}},off:function(t,e){if(void 0!==t){var n=this.handlers;return s(m(t),function(t){e?n[t]&&n[t].splice(g(n[t],e),1):delete n[t]}),this}},emit:function(t,e){this.options.domEvents&&ut(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](e),r++}},destroy:function(){this.element&&ct(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},lt(st,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:at,Input:E,TouchAction:W,TouchInput:$,MouseInput:X,PointerEventInput:Y,TouchMouseInput:H,SingleTouchInput:q,Recognizer:V,AttrRecognizer:Q,Tap:ot,Pan:tt,Swipe:it,Pinch:et,Rotate:rt,Press:nt,on:f,off:p,each:s,merge:gt,extend:mt,assign:lt,inherit:c,bindFn:u,prefixed:w}),(void 0===t?"undefined"==typeof self?{}:self:t).Hammer=st,"function"==typeof define&&define.amd?define(function(){return st}):void 0!==e&&e.exports?e.exports=st:t.Hammer=st})(window,document),e.exports=Hammer,e.exports._=n}),require("dom.theme",function(t,e,n){function r(t,e){for(var n="",r=1;10>=r;r++)p.forEach(function(i){for(var o=".thm-bg"+i,s=".thm-fg"+i,a=1;a<=r;a++){for(var c=[],u=[],l=[],h=1;h<=r;h++)l.push(a==h?o:"*"),u.push(a==h?o:"*"),c.push(a==h?s:"*"),h==r&&(l.push(l.pop()+".thm-fg"),c.push(c.pop()+s));n+="body.dom-theme-"+t+" "+l.join(" > ")+" { color: "+e["fg"+i]+" }\n",n+="body.dom-theme-"+t+" "+c.join(" > ")+" { color: "+e["bg"+i]+" }\n",n+="body.dom-theme-"+t+" "+u.join(" > ")+" .thm-svg-fill0 { fill: "+e["fg"+i]+" }\n",n+="body.dom-theme-"+t+" "+u.join(" > ")+" .thm-svg-stroke0 { stroke: "+e["fg"+i]+" }\n"}});return n}function i(t,e){var n="body.dom-theme-"+t+"{\n";return p.forEach(function(t){n+="  --thm-bg"+t+": "+e["bg"+t]+";\n"}),n+="}\n"}function o(t,e){var n="";return p.forEach(function(r){n+="body.dom-theme-"+t+".thm-bg"+r+" { background-color: "+e["bg"+r]+" }\n",n+="body.dom-theme-"+t+" .thm-fg"+r+" { color: "+e["fg"+r]+" }\n",n+="body.dom-theme-"+t+" .thm-bg"+r+" { background-color: "+e["bg"+r]+" }\n",n+="body.dom-theme-"+t+" .thm-bg"+r+"-bottom { background: linear-gradient(to top,"+e["bg"+r]+",transparent) }\n",n+="body.dom-theme-"+t+" .thm-bg"+r+"-top { background: linear-gradient(to bottom,"+e["bg"+r]+",transparent) }\n",n+="body.dom-theme-"+t+" .thm-bg"+r+"-left { background: linear-gradient(to right,"+e["bg"+r]+",transparent) }\n",n+="body.dom-theme-"+t+" .thm-bg"+r+"-right { background: linear-gradient(to left,"+e["bg"+r]+",transparent) }\n",isNaN(parseInt(r))&&(n+="body.dom-theme-"+t+" .thm-svg-fill"+r+" { fill: "+e["bg"+r]+" }\n",n+="body.dom-theme-"+t+" .thm-svg-stroke"+r+" { stroke: "+e["bg"+r]+" }\n")}),n}function s(t,e){var n=f.luminance(e.bg2),r=.6>n?l(e.white,Math.ceil(10*n)):l(e.black,"6"),i="";return[0,1,2,3,4,6,8,9,12,16,24].forEach(function(e){i+="body.dom-theme-"+t+" .thm-ele"+e+" {\n  box-shadow: 0 "+e+"px "+2*e+"px "+r+"\n}\n"}),i}function a(t){return void 0===t&&(t={}),"string"!=typeof t.bg0&&(t.bg0="#E0E0E0"),"string"!=typeof t.bg1&&(t.bg1="#F5F5F5"),"string"!=typeof t.bg2&&(t.bg2="#FAFAFA"),"string"!=typeof t.bg3&&(t.bg3="#FFF"),"string"!=typeof t.bgP&&(t.bgP="#3E50B4"),"string"!=typeof t.bgPD&&(t.bgPD=c(t.bgP)),"string"!=typeof t.bgPL&&(t.bgPL=u(t.bgP)),"string"!=typeof t.bgS&&(t.bgS="#FF3F80"),"string"!=typeof t.bgSD&&(t.bgSD=c(t.bgS)),"string"!=typeof t.bgSL&&(t.bgSL=u(t.bgS)),void 0===t.white&&(t.white="#fff"),void 0===t.black&&(t.black="#000"),p.forEach(function(e){var n=t["bg"+e],r=f.luminance(n);t["fg"+e]=.6>r?t.white:t.black}),t}function c(t){var e=new f(t);return e.rgb2hsl(),e.L*=.75,e.hsl2rgb(),e.stringify()}function u(t){var e=new f(t);return e.rgb2hsl(),e.L=.4+.6*e.L,e.hsl2rgb(),e.stringify()}function l(t,e){return 5>t.length?t+e:t+e+e}var h=function(){function e(){return r(n,arguments)}var n={en:{},fr:{}},r=t("$").intl;return e.all=n,e}();n.register=function(t,e){e=a(e);var n=i(t,e);n+=o(t,e),n+=s(t,e),n+=r(t,e);var c=d.css[t];return c||(c=document.createElement("style"),document.getElementsByTagName("head")[0].appendChild(c),d.css[t]=c),c.textContent=n,this},n.apply=function(t,e){if(void 0===e&&(e=document.body),!d.css[t])return void console.error("This theme has not been registered: ",t);var n=document.body;"string"==typeof d.current&&this.removeClass(n,"dom-theme-"+d.current),d.current=t,this.addClass(n,"dom-theme-"+d.current)};var f=t("tfw.color"),p=["0","1","2","3","P","PD","PL","S","SD","SL"],d={css:{},current:null};e.exports._=h}),require("tfw.color",function(t,e){function n(t){this.R=0,this.G=0,this.B=0,this.A=0,this.H=0,this.S=0,this.L=0,"string"==typeof t&&this.parse(t)}function r(t){if("#"!==t.charAt(0))return!1;var e=0,n=0,r=0,i=1;switch(t.length){case 4:e=parseInt(t.charAt(1),16)*p,n=parseInt(t.charAt(2),16)*p,r=parseInt(t.charAt(3),16)*p;break;case 5:e=parseInt(t.charAt(1),16)*p,n=parseInt(t.charAt(2),16)*p,r=parseInt(t.charAt(3),16)*p,i=parseInt(t.charAt(4),16)*p;break;case 7:e=parseInt(t.substr(1,2),16)*v,n=parseInt(t.substr(3,2),16)*v,r=parseInt(t.substr(5,2),16)*v;break;case 9:e=parseInt(t.substr(1,2),16)*v,n=parseInt(t.substr(3,2),16)*v,r=parseInt(t.substr(5,2),16)*v,i=parseInt(t.substr(7,2),16)*v}return isNaN(e)||isNaN(n)||isNaN(r)||isNaN(i)?this.R=this.G=this.B=this.A=0:(this.R=e,this.G=n,this.B=r,this.A=i),!0}function i(t){var e=g.exec(t);return!!e&&(this.R=c(parseInt(e[1],10)*v),this.G=c(parseInt(e[2],10)*v),this.B=c(parseInt(e[3],10)*v),this.A=1,!0)}function o(t){var e=y.exec(t);return!!e&&(this.R=c(parseInt(e[1],10)*v),this.G=c(parseInt(e[2],10)*v),this.B=c(parseInt(e[3],10)*v),this.A=c(parseFloat(e[4])),!0)}function s(t){var e=b.exec(t);return!!e&&(this.H=c(parseInt(e[1],10)*m),this.S=c(parseInt(e[2],10)*d),this.L=c(parseInt(e[3],10)*d),this.A=1,this.hsl2rgb(),!0)}function a(t){var e=Math.floor(t).toString(16);return 2>e.length&&(e="0"+e),e}function c(t){return 0>t?0:1<t?1:t}function u(t){var e=new n;return e.parse(t),e}var l=function(){function e(){return r(n,arguments)}var n={en:{},fr:{}},r=t("$").intl;return e.all=n,e}();e.exports=n,n.prototype.luminance=function(){return.2126*this.R+.7152*this.G+.0722*this.B},n.prototype.stringify=function(){var t=a(255*this.R)+a(255*this.G)+a(255*this.B);return 1>this.A&&(t+=a(255*this.A)),"#".concat(t)},n.prototype.parse=function(t){var e=void 0===t?"#000000":t,n=e.trim().toUpperCase();return!!(r.call(this,n)||i.call(this,n)||o.call(this,n)||s.call(this,n))},n.prototype.copy=function(){var t=new n;return t.R=this.R,t.G=this.G,t.B=this.B,t.A=this.A,t.H=this.H,t.S=this.S,t.L=this.L,t},n.prototype.hsl2rgb=function(){var t=6*this.H,e=this.S,n=this.L,r=(1-Math.abs(2*n-1))*e,i=r*(1-Math.abs(t%2-1)),o=0,s=0,a=0;3>t?1>t?(o=r,s=i,a=0):2>t?(o=i,s=r,a=0):(o=0,s=r,a=i):4>t?(o=0,s=i,a=r):5>t?(o=i,s=0,a=r):(o=r,s=0,a=i);var c=n-.5*r;this.R=o+c,this.G=s+c,this.B=a+c},n.prototype.rgb2hsl=function(){var t=this.R,e=this.G,n=this.B,r=Math.min(t,e,n),i=Math.max(t,e,n),o=i-r;this.L=.5*(i+r),1e-6>o?(this.H=0,this.S=0):(this.S=o/(1-Math.abs(2*this.L-1)),this.H=i===t?e>=n?f*((e-n)/o):1-f*((n-e)/o):i===e?f*(2+(n-t)/o):f*(4+(t-e)/o))};var h=new n;n.instance=h,n.parse=u,n.luminance=function(t){return u(t).luminance()},n.newRGB=function(t){var e=new n;return e.R=t,e.G=t,e.B=t,e},n.newRGBA=function(t){var e=new n;return e.R=t,e.G=t,e.B=t,e.A=t,e};var f=1/6,p=1/15,d=1/99,v=1/255,m=1/359,g=/^RGB[\s\(]+([0-9]+)[^0-9]+([0-9]+)[^0-9]+([0-9]+)/,y=/^RGBA[\s\(]+([0-9]+)[^0-9]+([0-9]+)[^0-9]+([0-9]+)[^0-9\.]+([0-9\.]+)/,b=/^HSL[\s\(]+([0-9]+)[^0-9]+([0-9]+)[^0-9]+([0-9]+)/;e.exports._=l}),require("polyfill.classList",function(t,e){var n=function(){function e(){return r(n,arguments)}var n={en:{}},r=t("$").intl;return e.all=n,e}();"document"in self&&("classList"in document.createElement("_")&&(!document.createElementNS||"classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))?function(){var t=document.createElement("_");if(t.classList.add("c1","c2"),!t.classList.contains("c2")){var e=function(t){var e=DOMTokenList.prototype[t];DOMTokenList.prototype[t]=function(t){var n,r=arguments.length;for(n=0;n<r;n++)t=arguments[n],e.call(this,t)}};e("add"),e("remove")}if(t.classList.toggle("c3",!1),t.classList.contains("c3")){var n=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,e){return 1 in arguments&&!this.contains(t)==!e?e:n.call(this,t)}}t=null}():function(t){if("Element"in t){var e=t.Element.prototype,n=Object,r=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")},i=Array.prototype.indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},o=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},s=function(t,e){if(""===e)throw new o("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(e))throw new o("INVALID_CHARACTER_ERR","String contains an invalid character");return i.call(t,e)},a=function(t){for(var e=r.call(t.getAttribute("class")||""),n=e?e.split(/\s+/):[],i=0,o=n.length;i<o;i++)this.push(n[i]);this._updateClassName=function(){t.setAttribute("class",this.toString())}},c=a.prototype=[],u=function(){return new a(this)};if(o.prototype=Error.prototype,c.item=function(t){return this[t]||null},c.contains=function(t){return t+="",-1!==s(this,t)},c.add=function(){var t,e=arguments,n=0,r=e.length,i=!1;do{t=e[n]+"",-1===s(this,t)&&(this.push(t),i=!0)}while(++n<r);i&&this._updateClassName()},c.remove=function(){var t,e,n=arguments,r=0,i=n.length,o=!1;do{for(t=n[r]+"",e=s(this,t);-1!==e;)this.splice(e,1),o=!0,e=s(this,t)}while(++r<i);o&&this._updateClassName()},c.toggle=function(t,e){t+="";var n=this.contains(t),r=n?!0!==e&&"remove":!1!==e&&"add";return r&&this[r](t),!0===e||!1===e?e:!n},c.toString=function(){return this.join(" ")},n.defineProperty){var l={get:u,enumerable:!0,configurable:!0};try{n.defineProperty(e,"classList",l)}catch(t){-2146823252===t.number&&(l.enumerable=!1,n.defineProperty(e,"classList",l))}}else n.prototype.__defineGetter__&&e.__defineGetter__("classList",u)}}(self)),e.exports._=n});
=======
"use strict";function addListener(t,e){window.addEventListener?window.addEventListener(t,e,!1):window.attachEvent("on"+t,e)}!function(t){const e="node://".length,n={},o={},r="function"==typeof window.require?window.require:null,i=function(s,d){if("node://"===s.substr(0,e)){if(!r)throw Error("[require] NodeJS is not available to load module "+s.substr(e));return r(s.substr(e))}if("function"==typeof d)return o[s]=d,d;const u=o[s];if(void 0===u){const a=new Error("Required module is missing: "+s);throw console.error(a.stack),a}var c=n[s];if(void 0===c){c={exports:{}};const f=c.exports;u.call(t,i,c,f),n[s]=c.exports,c=c.exports}return c};t.APP={},t.require=i}(this),addListener("DOMContentLoaded",function(){document.body.parentNode.$data={},APP=require("s3/app"),setTimeout(function(){"function"==typeof APP.start&&APP.start()})});
>>>>>>> de2333e77e77f1037fd6be6309f12967aec0b862
//# sourceMappingURL=s3.html.map