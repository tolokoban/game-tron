{"version":3,"sources":["app.js"],"names":["require","module","exports","_","Dom","Car","Action","start","canvas","ctx","getContext","action","create","type","car","setAttribute","clientWidth","clientHeight","anim","time","window","requestAnimationFrame","clearRect","width","height","isDead","polyline","beginPath","moveTo","firstX","firstY","foreachTail","x","y","lineTo","strokeStyle","stroke","x0","lastX","y0","lastY","move","x1","y1","collide","console","log","Polyline","poly","add","a","info"],"mappings":"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","sourcesContent":["/** @module s2/app */require( 's2/app', function(require, module, exports) { var _=function(){return ''};   \"use strict\";\r\n\r\nconst Dom = require(\"dom\"),\r\n      Car = require(\"s2/car\"),\r\n      Action = require(\"s2/tron.action\");\r\n\r\n\r\nexports.start = function() {\r\n    const canvas = Dom(\"canvas\"),\r\n          ctx = canvas.getContext( \"2d\" ),\r\n          action = Action.create({ type: \"keyboard\" }),\r\n          car = new Car( action );\r\n\r\n    canvas.setAttribute( \"width\", canvas.clientWidth );\r\n    canvas.setAttribute( \"height\", canvas.clientHeight );\r\n\r\n    function anim( time ) {\r\n        window.requestAnimationFrame( anim );\r\n\r\n        ctx.clearRect( 0, 0, canvas.width, canvas.height );\r\n\r\n        if( car.isDead ) return;\r\n\r\n        const polyline = car.polyline;\r\n        ctx.beginPath();\r\n        ctx.moveTo( polyline.firstX, polyline.firstY );\r\n        polyline.foreachTail( (x, y) => ctx.lineTo( x, y ) );\r\n        ctx.strokeStyle = \"#f70\";\r\n        ctx.stroke();\r\n\r\n        const x0 = car.polyline.lastX,\r\n              y0 = car.polyline.lastY;\r\n        car.move( time );\r\n        const x1 = car.polyline.lastX,\r\n              y1 = car.polyline.lastY;\r\n\r\n        if( car.polyline.collide( x0, y0, x1, y1 ) ) {\r\n            car.isDead = true;\r\n            console.log( \"DEAD!\" );\r\n        }\r\n    }\r\n\r\n    window.requestAnimationFrame( anim );\r\n\r\n    const Polyline = require(\"s2/polyline\");\r\n    const poly = new Polyline(0, 100);\r\n    poly.move(100, 0);\r\n    poly.add();\r\n    poly.move(0, -50);\r\n    poly.add();\r\n    poly.move(-50, 0);\r\n    const a = poly.collide( 75, 40, 75, 60 );\r\n    console.info(\"[s2/app] a=\", a);\r\n};\r\n\r\n\r\n\r\nmodule.exports._ = _;\n})"]}