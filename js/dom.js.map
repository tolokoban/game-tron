{"version":3,"sources":["dom.js"],"names":["require","module","exports","_","D","X","intl","arguments","all","Theme","Gestures","$","dom","Node","undefined","Error","element","elem","document","getElementById","console","error","SYMBOL","Date","now","RX_ENTITY","tagNS","svgRoot","bind","version","xmlns","svg","tag","div","txt","window","createTextNode","textOrHtml","get","css","att","removeAtt","addClass","hasClass","removeClass","toggleClass","saveStyle","restoreStyle","registerTheme","register","applyTheme","apply","registerAndApplyTheme","replace","detach","on","off","add","wrap","clear","obj","nomethods","Object","defineProperty","value","writable","configurable","enumerable","newElem","oldElem","parentNode","replaceChild","styles","key","val","style","attribs","setAttribute","attrib","removeAttribute","i","child","isValidArgument","length","addArray","addText","addNode","ex","slice","call","appendChild","substr","toLowerCase","html","innerHTML","test","text","array","Array","isArray","forEach","pe","events","NON_POINTER_EVENTS","slots","extra","tap","preview","charAt","indexOf","addEventListener","ns","name","e","createElementNS","trim","arg","split","item","args","unshift","className","classList","contains","remove","firstChild","removeChild","query","querySelector","parent","parentElement","target","shift","push","content","JSON","stringify","textContent","elements","prototype","parse","pop","k","v"],"mappings":"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","sourcesContent":["/** @module dom */require( 'dom', function(require, module, exports) { var _=function(){var D={\"en\":{}},X=require(\"$\").intl;function _(){return X(D,arguments);}_.all=D;return _}();\n   /**\r\n * @module dom\r\n *\r\n * @description\r\n * Functions which facilitate DOM manipulations.\r\n *\r\n * @example\r\n * var mod = require('dom');\r\n */\r\nrequire( \"polyfill.classList\" );\r\n\r\nconst\r\n    Theme = require( \"dom.theme\" ),\r\n    Gestures = require( \"tfw.gestures\" );\r\n\r\n\r\nfunction $( dom ) {\r\n    if ( dom instanceof Node ) return dom;\r\n    if ( dom === undefined || dom === null ) {\r\n        throw Error( \"`dom` is not a valid element!\", dom );\r\n    }\r\n    if ( dom.$ instanceof Node ) return dom.$;\r\n    if ( dom.element instanceof Node ) return dom.element;\r\n    if ( typeof dom === 'string' ) {\r\n        var elem = document.getElementById( dom );\r\n        if ( !elem ) {\r\n            console.error( \"[dom] There is no DOM element with this ID: `\" + dom + \"`\" );\r\n        }\r\n        return elem;\r\n    }\r\n    if ( typeof dom.element === 'function' ) return dom.element();\r\n    return dom;\r\n};\r\n\r\nmodule.exports = $;\r\n\r\n// Used to store data on the DOM element without colliding with existing attributes.\r\nvar SYMBOL = '@dom' + Date.now();\r\n\r\nvar RX_ENTITY = /^&(#[0-9]+|[a-zA-Z0-9]+);$/;\r\n\r\n$.tagNS = tagNS;\r\n$.svgRoot = tagNS.bind( undefined, \"http://www.w3.org/2000/svg\", \"svg\", {\r\n    version: '1.1',\r\n    'xmlns:svg': 'http://www.w3.org/2000/svg',\r\n    xmlns: 'http://www.w3.org/2000/svg',\r\n    'xmlns:xlink': 'http://www.w3.org/1999/xlink'\r\n} );\r\n$.svg = tagNS.bind( undefined, \"http://www.w3.org/2000/svg\" );\r\n$.tag = tagNS.bind( undefined, \"http://www.w3.org/1999/xhtml\" );\r\n$.div = tagNS.bind( undefined, \"http://www.w3.org/1999/xhtml\", \"div\" );\r\n$.txt = window.document.createTextNode.bind( window.document );\r\n$.textOrHtml = textOrHtml;\r\n$.get = get;\r\n/**\r\n * Add a readonly `element` property to `obj` and return it.\r\n */\r\n$.elem = elem;\r\n/**\r\n * Apply css rules on `element`.\r\n *\r\n * @return `element`.\r\n *\r\n * @example\r\n * var $ = require('dom');\r\n * $.css( element, { width: '800px'. height: '600px' });\r\n */\r\n$.css = css;\r\n$.att = att;\r\n$.removeAtt = removeAtt;\r\n$.addClass = addClass;\r\n$.hasClass = hasClass;\r\n$.removeClass = removeClass;\r\n$.toggleClass = toggleClass;\r\n$.saveStyle = saveStyle;\r\n$.restoreStyle = restoreStyle;\r\n/**\r\n * @param {string} name - Name of this theme.\r\n * @param {object} style - Colors.\r\n * @param {string} style.bg0 - [optional] Background level 0.\r\n * @param {string} style.bg1 - [optional] Background level 1.\r\n * @param {string} style.bg2 - [optional] Background level 2.\r\n * @param {string} style.bg3 - [optional] Background level 3.\r\n * @param {string} style.bgP - [optional] Primary color.\r\n * @param {string} style.bgPD - [optional] Primary color (dark version).\r\n * @param {string} style.bgPL - [optional] Primary color (light version).\r\n * @param {string} style.bgS - [optional] Accent color.\r\n * @param {string} style.bgSD - [optional] Accent color (dark version).\r\n * @param {string} style.bgSL - [optional] Accent color (light version).\r\n * @param  {string} style.fg*  - [optional]  To each  background color\r\n * (bg) correspond a text color (fg).\r\n */\r\n$.registerTheme = Theme.register.bind( $ );\r\n/**\r\n * @param {string} name - Name of the heme to apply.\r\n */\r\n$.applyTheme = Theme.apply.bind( $ );\r\n$.registerAndApplyTheme = registerAndApplyTheme;\r\n/**\r\n * @param newElem {Element} - Replacement element.\r\n * @param oldElem {Element} - Element to replace.\r\n */\r\n$.replace = replace;\r\n/**\r\n * Remove element from its parent.\r\n * @param element {Element} - Element to detach from its parent.\r\n * @return The parent element.\r\n */\r\n$.detach = detach;\r\n/**\r\n * Add event handlers to one or many elements.\r\n *\r\n * @param {object|array}  element -  list of  elements on  which apply\r\n * events handlers.\r\n *\r\n * @param  {object|function} slots  - If  a function  is given,  it is\r\n * considered as a slot for the event `tap`.  Otherwise, the object is\r\n * a map  between events' names (the  key) and function to  handle the\r\n * event (the value).\r\n * Events' names are:\r\n * * __tap__: When  the element is  pressed and released in  less than\r\n 900 ms and without too much sliding.\r\n * * __doubletap__\r\n * * __dragmove__\r\n *\r\n * @param {boolean} capture - If `true` events are captured before they reach the children.\r\n *\r\n * @example\r\n *    DOM.on( [screen, button], function() {...} );\r\n *    DOM.on( body, null );   // Do nothing, but stop propagation.\r\n *    DOM.on( element, { tap: function() {...} } );\r\n */\r\n$.on = on;\r\n$.off = off;\r\n/**\r\n * Append all the `children` to `element`.\r\n * @param element\r\n * @param ...children\r\n */\r\n$.add = add;\r\n/**\r\n * Add the attribute `element` and the following functions to `obj`:\r\n * * __css__\r\n * * __addClass__\r\n * * __removeClass__\r\n * * __toggleClass__\r\n */\r\n$.wrap = wrap;\r\n/**\r\n * Remove all children of the `element`.\r\n * @param element {Element} - Element from which remove all the children.\r\n */\r\n$.clear = clear;\r\n\r\nfunction wrap( obj, element, nomethods ) {\r\n    Object.defineProperty( obj, 'element', {\r\n        value: element,\r\n        writable: false,\r\n        configurable: false,\r\n        enumerable: true\r\n    } );\r\n    if ( nomethods ) return obj;\r\n\r\n    obj.on = on.bind( obj, element );\r\n    obj.css = css.bind( obj, element );\r\n    obj.add = add.bind( obj, element );\r\n    obj.att = att.bind( obj, element );\r\n    obj.addClass = addClass.bind( obj, element );\r\n    obj.hasClass = hasClass.bind( obj, element );\r\n    obj.removeClass = removeClass.bind( obj, element );\r\n    obj.toggleClass = toggleClass.bind( obj, element );\r\n    return obj;\r\n}\r\n\r\nfunction replace( newElem, oldElem ) {\r\n    newElem = $( newElem );\r\n    oldElem = $( oldElem );\r\n    oldElem.parentNode.replaceChild( newElem, oldElem );\r\n    return newElem;\r\n}\r\n\r\nfunction css( element, styles ) {\r\n    element = $( element );\r\n    var key, val;\r\n    for ( key in styles ) {\r\n        val = styles[ key ];\r\n        element.style[ key ] = val;\r\n    }\r\n    return element;\r\n}\r\n\r\nfunction att( element, attribs, value ) {\r\n    element = $( element );\r\n    var key, val;\r\n    if ( typeof attribs === 'string' ) {\r\n        if ( typeof value === 'undefined' ) value = \"\";\r\n        key = attribs;\r\n        attribs = {};\r\n        attribs[ key ] = value;\r\n    }\r\n    for ( key in attribs ) {\r\n        val = attribs[ key ];\r\n        element.setAttribute( key, val );\r\n    }\r\n    return element;\r\n}\r\n\r\nfunction removeAtt( element, attrib ) {\r\n    element = $( element );\r\n    element.removeAttribute( attrib );\r\n    return element;\r\n}\r\n\r\nfunction add( element ) {\r\n    element = $( element );\r\n    try {\r\n        var i, child, isValidArgument;\r\n        for ( i = 1; i < arguments.length; i++ ) {\r\n            child = arguments[ i ];\r\n            isValidArgument = addArray( element, child ) ||\r\n                addText( element, child ) ||\r\n                addNode( element, child );\r\n            if ( !isValidArgument ) {\r\n                console.error( \"Argument #\" + i + \" of dom.add() is invalid!\", arguments );\r\n                debugger;\r\n            }\r\n        }\r\n        return element;\r\n    } catch ( ex ) {\r\n        console.error( \"[DOM.add] arguments=\", [].slice.call( arguments ) );\r\n        console.error( \"[DOM.add] exception=\", ex );\r\n    }\r\n}\r\n\r\nfunction addNode( element, child ) {\r\n    child = $( child );\r\n    if ( child instanceof Node ) {\r\n        element.appendChild( child );\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n\r\nfunction addText( element, child ) {\r\n    if ( typeof child === 'number' ) child = '' + child;\r\n    if ( typeof child !== 'string' ) return false;\r\n\r\n    if ( child.substr( 0, 6 ).toLowerCase() == '<html>' ) {\r\n        // Text starting with '<html>' is HTML code to parse.\r\n        var html = child.substr( 6 );\r\n        child = $.tag( 'span' );\r\n        child.innerHTML = html;\r\n    } else if ( RX_ENTITY.test( child ) ) {\r\n        // HTML entity, for instance: &amp;, &lt;, ...\r\n        var text = child;\r\n        child = $.tag( 'span' );\r\n        child.innerHTML = text;\r\n    } else {\r\n        child = document.createTextNode( child );\r\n    }\r\n    element.appendChild( child );\r\n    return true;\r\n}\r\n\r\nfunction addArray( element, array ) {\r\n    if ( !Array.isArray( array ) ) return false;\r\n    array.forEach( function ( child ) {\r\n        add( element, child );\r\n    } );\r\n    return true;\r\n}\r\n\r\nfunction off( element ) {\r\n    if ( Array.isArray( element ) ) {\r\n        element.forEach( function ( elem ) {\r\n            off( elem );\r\n        } );\r\n        return element;\r\n    }\r\n\r\n    if ( typeof element[ SYMBOL ] === 'undefined' ) return element;\r\n    var pe = element[ SYMBOL ].events;\r\n    if ( typeof pe === 'undefined' ) return element;\r\n    pe.off();\r\n    delete element[ SYMBOL ].events;\r\n}\r\n\r\nvar NON_POINTER_EVENTS = [\r\n  'keyup', 'keydown', 'scroll', 'load', 'error'\r\n];\r\n\r\nfunction on( element, slots, extra ) {\r\n    // If only a function is passed, we consider this is a Tap event.\r\n    if ( typeof slots === 'function' || slots === null ) slots = { tap: slots };\r\n    else if ( typeof slots === 'string' && typeof extra === 'function' ) {\r\n        // Syntax: $.on( elem, 'tap', function(evt) {...} )\r\n        var obj = {};\r\n        obj[ slots ] = extra;\r\n        slots = obj;\r\n    }\r\n\r\n    if ( Array.isArray( element ) ) {\r\n        element.forEach( function ( elem ) {\r\n            on( elem, slots );\r\n        } );\r\n        return element;\r\n    }\r\n\r\n    element = $( element );\r\n    if ( typeof element[ SYMBOL ] === 'undefined' ) element[ SYMBOL ] = {};\r\n    if ( typeof element[ SYMBOL ].events === 'undefined' ) {\r\n        element[ SYMBOL ].events = Gestures( element );\r\n    }\r\n\r\n    var key, val, preview;\r\n    for ( key in slots ) {\r\n        val = slots[ key ];\r\n        if ( key.charAt( 0 ) == '!' ) {\r\n            key = key.substr( 1 );\r\n            preview = true;\r\n        } else {\r\n            preview = false;\r\n        }\r\n        if ( NON_POINTER_EVENTS.indexOf( key.toLowerCase() ) > -1 ) {\r\n            element.addEventListener( key, val, preview );\r\n        } else {\r\n            element[ SYMBOL ].events.on( key, val, preview );\r\n        }\r\n    }\r\n\r\n    return element;\r\n}\r\n\r\nfunction tagNS( ns, name ) {\r\n    try {\r\n        var e = document.createElementNS( ns, name.trim().toLowerCase() );\r\n        var i, arg, key, val;\r\n        for ( i = 2; i < arguments.length; i++ ) {\r\n            arg = arguments[ i ];\r\n            if ( Array.isArray( arg ) ) {\r\n                // Arrays are for children.\r\n                arg.forEach( function ( child ) {\r\n                    switch ( typeof child ) {\r\n                    case 'string':\r\n                    case 'number':\r\n                    case 'boolean':\r\n                        child = '' + child;\r\n                        if ( child.substr( 0, 6 ) == '<html>' ) {\r\n                            var html = child.substr( 6 );\r\n                            child = $.tag( 'span' );\r\n                            child.innerHTML = html;\r\n                        } else {\r\n                            child = document.createTextNode( child );\r\n                        }\r\n                        break;\r\n                    }\r\n                    add( e, child );\r\n                } );\r\n            } else {\r\n                switch ( typeof arg ) {\r\n                case \"string\":\r\n                    arg.split( ' ' ).forEach( function ( item ) {\r\n                        if ( item.length > 0 ) {\r\n                            addClass( e, item );\r\n                        }\r\n                    } );\r\n                    break;\r\n                case \"object\":\r\n                    for ( key in arg ) {\r\n                        val = arg[ key ];\r\n                        e.setAttribute( key, val );\r\n                    }\r\n                    break;\r\n                default:\r\n                    throw Error( \"[dom.tag] Error creating <\" + name + \">: Invalid argument #\" + i + \"!\" );\r\n                }\r\n            }\r\n        }\r\n        return e;\r\n    } catch ( ex ) {\r\n        console.error( \"[dom.tagNS] Error with `ns` = \", ns, \" and `name` = \", name );\r\n        console.error( ex );\r\n    }\r\n};\r\n\r\n\r\nfunction addClass( elem ) {\r\n    var args = [].slice.call( arguments, 1 );\r\n    if ( Array.isArray( elem ) ) {\r\n        // Loop on each element.\r\n        args.unshift( null );\r\n        elem.forEach( function ( child ) {\r\n            args[ 0 ] = child;\r\n            addClass.apply( undefined, args );\r\n        } );\r\n        return elem;\r\n    }\r\n    elem = $( elem );\r\n    args.forEach( function ( className ) {\r\n        if ( typeof className !== 'string' ) return;\r\n        className = className.trim();\r\n        if ( className.length == 0 ) return;\r\n        try {\r\n            if ( elem.classList )\r\n                elem.classList.add( className );\r\n        } catch ( ex ) {\r\n            console.error( \"[dom.addClass] Invalid class name: \", className );\r\n            console.error( ex );\r\n        }\r\n    } );\r\n    return elem;\r\n}\r\n\r\n\r\nfunction hasClass( elem, className ) {\r\n    elem = $( elem );\r\n    if ( !elem.classList ) return false;\r\n    return elem.classList.contains( className );\r\n}\r\n\r\n\r\nfunction removeClass( elem ) {\r\n    var args = [].slice.call( arguments, 1 );\r\n    if ( Array.isArray( elem ) ) {\r\n        // Loop on each element.\r\n        args.unshift( null );\r\n        elem.forEach( function ( child ) {\r\n            args[ 0 ] = child;\r\n            removeClass.apply( undefined, args );\r\n        } );\r\n        return elem;\r\n    }\r\n    elem = $( elem );\r\n    args.forEach( function ( className ) {\r\n        if ( typeof className !== 'string' ) return;\r\n        try {\r\n            if ( elem.classList )\r\n                elem.classList.remove( className );\r\n        } catch ( ex ) {\r\n            console.error( \"[dom.removeClass] Invalid class name: \", className );\r\n            console.error( ex );\r\n        }\r\n    } );\r\n    return elem;\r\n}\r\n\r\n\r\nfunction toggleClass( elem ) {\r\n    var args = [].slice.call( arguments, 1 );\r\n    args.forEach( function ( className ) {\r\n        if ( hasClass( elem, className ) ) {\r\n            removeClass( elem, className );\r\n        } else {\r\n            addClass( elem, className );\r\n        }\r\n    } );\r\n    return elem;\r\n}\r\n\r\n\r\nfunction clear( element ) {\r\n    // (!) On préfère retirer les éléments un par un du DOM plutôt que d'utiliser simplement\r\n    // this.html(\"\").\r\n    // En effet, le code simplifié a des conséquences inattendues dans IE9 et IE10 au moins.\r\n    // Le bug des markers qui disparaissaients sur les cartes de Trail-Passion 4 a été corrigé\r\n    // avec cette modification.\r\n    element = $( element );\r\n    var e = element;\r\n    while ( e.firstChild ) {\r\n        e.removeChild( e.firstChild );\r\n    }\r\n    var args = [].slice.call( arguments );\r\n    if ( args.length > 1 ) {\r\n        add.apply( this, args );\r\n    }\r\n    return element;\r\n}\r\n\r\nfunction get( element, query ) {\r\n    element = $( element );\r\n    if ( typeof query === 'undefined' ) {\r\n        query = element;\r\n        element = window.document;\r\n    }\r\n    return element.querySelector( query );\r\n}\r\n\r\nfunction detach( element ) {\r\n    element = $( element );\r\n    var parent = element.parentElement;\r\n    if ( !parent ) return parent;\r\n    parent.removeChild( element );\r\n    return parent;\r\n}\r\n\r\nfunction elem( target ) {\r\n    var args = [].slice.call( arguments );\r\n    args.shift();\r\n    if ( args.length == 0 ) args = [ 'div' ];\r\n    args.push( 'dom', 'custom' );\r\n    var e;\r\n    if ( typeof args[ 0 ].element !== 'undefined' ) {\r\n        e = args[ 0 ].element;\r\n        addClass( e, 'dom', 'custom' );\r\n    } else if ( typeof args[ 0 ].appendChild === 'function' ) {\r\n        e = args[ 0 ];\r\n        addClass( e, 'dom', 'custom' );\r\n    } else {\r\n        e = $.tag.apply( $, args );\r\n    }\r\n    Object.defineProperty( target, 'element', {\r\n        value: e,\r\n        writable: false,\r\n        configurable: false,\r\n        enumerable: true\r\n    } );\r\n    return e;\r\n}\r\n\r\nfunction textOrHtml( element, content ) {\r\n    if ( typeof content === 'undefined' ) content = '';\r\n    if ( content === null ) content = '';\r\n    if ( typeof content !== 'string' ) content = JSON.stringify( content );\r\n    if ( content.substr( 0, 6 ) == '<html>' ) {\r\n        element.innerHTML = content.substr( 6 );\r\n    } else {\r\n        element.textContent = content;\r\n    }\r\n    return element;\r\n}\r\n\r\nfunction saveStyle( elements ) {\r\n    if ( !Array.isArray( elements ) ) return saveStyle( Array.prototype.slice.call( arguments ) );\r\n    elements.forEach( function ( elem ) {\r\n        elem = $( elem );\r\n        if ( typeof elem[ SYMBOL ] === 'undefined' ) elem[ SYMBOL ] = {};\r\n        if ( !Array.isArray( elem[ SYMBOL ].style ) ) elem[ SYMBOL ].style = [];\r\n        elem[ SYMBOL ].style.push( JSON.stringify( elem.style ) );\r\n    } );\r\n}\r\n\r\nfunction restoreStyle( elements ) {\r\n    if ( !Array.isArray( elements ) ) return restoreStyle( Array.prototype.slice.call( arguments ) );\r\n    elements.forEach( function ( elem ) {\r\n        elem = $( elem );\r\n        if ( typeof elem[ SYMBOL ] === 'undefined' || !Array.isArray( elem[ SYMBOL ].style ) ) throw Error(\r\n            \"[dom.restoreStyle] `saveStyle()` has never been used on this element!\" );\r\n        if ( elem[ SYMBOL ].style.length == 0 ) throw Error(\r\n            \"[dom.restoreStyle] more `restore` than `save`!\" );\r\n        var styles = JSON.parse( elem[ SYMBOL ].style.pop() );\r\n        var k, v;\r\n        for ( k in styles ) {\r\n            v = styles[ k ];\r\n            if ( typeof v !== 'undefined' ) {\r\n                elem.style[ k ] = v;\r\n            }\r\n        }\r\n    } );\r\n};\r\n\r\nfunction registerAndApplyTheme( name, styles ) {\r\n    Theme.register.call( this, name, styles );\r\n    Theme.apply.call( this, name );\r\n}\n\n\nmodule.exports._ = _;\n})"]}