{"version":3,"sources":["$.js"],"names":["require","module","exports","config","ZERO_CHAR_CODE","charCodeAt","lang","_lang","language","window","localStorage","getItem","navigator","browserLanguage","substr","toLowerCase","setItem","intl","words","params","dic","k","defLang","Object","keys","txt","processArguments","output","length","newTxt","lastIdx","i","c","charAt","substring","pos"],"mappings":"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","sourcesContent":["/** @module $ */require( '$', function(require, module, exports) {    exports.config={\"name\":\"\\\"game-tron\\\"\",\"description\":\"\\\"Step by step making-of tron like game.\\\"\",\"author\":\"\\\"tolokoban\\\"\",\"version\":\"\\\"0.0.1\\\"\",\"major\":\"0\",\"minor\":\"0\",\"revision\":\"1\",\"date\":\"2018-12-29T12:51:37.603Z\",\"consts\":{}};\n\"use strict\";\n\nconst ZERO_CHAR_CODE = '0'.charCodeAt( 0 );\n\nexports.lang = function lang( _lang ) {\n    let language = _lang;\n    if ( typeof language === 'undefined' ) {\n        if ( window.localStorage ) {\n            language = window.localStorage.getItem( \"Language\" );\n        }\n        if ( !language ) {\n            language = window.navigator.language;\n            if ( !language ) {\n                language = window.navigator.browserLanguage;\n                if ( !language ) {\n                    language = \"fr\";\n                }\n            }\n        }\n        language = language.substr( 0, 2 ).toLowerCase();\n    }\n    if ( window.localStorage ) {\n        window.localStorage.setItem( \"Language\", language );\n    }\n    return language;\n};\n\nexports.intl = function intl( words, params ) {\n    let dic = words[ exports.lang() ];\n\n    const\n        k = params[ 0 ],\n        defLang = Object.keys( words )[ 0 ];\n    if ( !defLang ) return k;\n\n    if ( !dic ) {\n        dic = words[ defLang ];\n        if ( !dic ) {\n            return k;\n        }\n    }\n    let txt = dic[ k ];\n    if ( !txt ) {\n        dic = words[ defLang ];\n        txt = dic[ k ];\n    }\n    if ( !txt ) return k;\n    return processArguments( txt, params );\n};\n\n\n/**\n * @param {string} txt - Text with place holders like `$1`, `$2`, etc.\n * @param {array} params - Params for place holders replacement.\n * @return {string} The text with place holders replaces by params.\n */\nfunction processArguments( txt, params ) {\n    let output = txt;\n    if ( params.length > 1 ) {\n        let\n            newTxt = \"\",\n            lastIdx = 0;\n        for ( let i = 0; i < txt.length; i++ ) {\n            const c = txt.charAt( i );\n            if ( c === '$' ) {\n                newTxt += txt.substring( lastIdx, i );\n                i++;\n                const pos = txt.charCodeAt( i ) - ZERO_CHAR_CODE;\n                if ( pos < 0 || pos >= params.length ) {\n                    newTxt += `$${txt.charAt(i)}`;\n                } else {\n                    newTxt += params[ pos ];\n                }\n                lastIdx = i + 1;\n            } else if ( c === '\\\\' ) {\n                newTxt += txt.substring( lastIdx, i );\n                i++;\n                newTxt += txt.charAt( i );\n                lastIdx = i + 1;\n            }\n        }\n        newTxt += txt.substr( lastIdx );\n        output = newTxt;\n    }\n    return output;\n}\n\n\n})"]}